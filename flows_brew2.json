[
    {
        "id": "2661457f.e66b3a",
        "type": "tab",
        "label": "Temperatures",
        "disabled": false,
        "info": "Temperature readings, triggered every 2 \nseconds (note that the PID algorith has this \nfrequency hard coded into it, and those \nfunctions will need to be modified if the \ntrigger frequency is changed). Also smoothing \nand formating for temperature display."
    },
    {
        "id": "76f17c2e.6cd914",
        "type": "tab",
        "label": "HLT buttons",
        "disabled": false,
        "info": ""
    },
    {
        "id": "7ff47c5f.48e634",
        "type": "tab",
        "label": "HLT controller",
        "disabled": false,
        "info": ""
    },
    {
        "id": "7b4cf8e5.18ab18",
        "type": "tab",
        "label": "MLT buttons",
        "disabled": false,
        "info": "Buttons for mash control. These also display \nstate."
    },
    {
        "id": "46527686.8f8e78",
        "type": "tab",
        "label": "MLT controller",
        "disabled": false,
        "info": "Everything related to mash/HERMS PID control"
    },
    {
        "id": "e23d6dbe.65bd1",
        "type": "tab",
        "label": "PID outputs",
        "disabled": false,
        "info": "This flow displays output from the PID \nalgorithm. This can be useful for tuning \npurposes."
    },
    {
        "id": "ec8d6491.d7cdd8",
        "type": "tab",
        "label": "BK buttons",
        "disabled": false,
        "info": "Buttons related to controlling the boil.\nThese buttons also display state."
    },
    {
        "id": "87542114.410a9",
        "type": "tab",
        "label": "BK controller",
        "disabled": false,
        "info": "PID functionality, as well as an interlock \nscheme to prevent multiple elements from being\nused at one time."
    },
    {
        "id": "cc79254f.7430d8",
        "type": "tab",
        "label": "Element outputs",
        "disabled": false,
        "info": "Routing to GPIO, as well as displays for element\noutput in duty % and watts."
    },
    {
        "id": "ec35014e.440c6",
        "type": "tab",
        "label": "Pump control",
        "disabled": false,
        "info": "This flow provides a button to turn a pump on \nand off. The colour of the pump button reflects\nits status. The pump has one restriction in that \nit can not be turned off while RIMS is active.\nSuch attempts are blocked, with a notification\nprovided to the user."
    },
    {
        "id": "6de3a69b.f14158",
        "type": "tab",
        "label": "UI",
        "disabled": false,
        "info": "This tab contains a collection of UI features.\n* CSS overide to ensure dashboard is only 1 or 2 columns\n* Centre \"group\" titles\n* Navigation buttons\n* Bolts indicating element activity"
    },
    {
        "id": "ce55a89f.3849c8",
        "type": "tab",
        "label": "Logging",
        "disabled": false,
        "info": ""
    },
    {
        "id": "defe4cfa.b127d",
        "type": "tab",
        "label": "Volume",
        "disabled": true,
        "info": "A pressure sensor is read by an analog input\nboard. The pressure reading is then converted\nto cmH20 and volume and displayed."
    },
    {
        "id": "7100b8c3.e5a8c8",
        "type": "tab",
        "label": "ALL Brew Pumps",
        "disabled": false,
        "info": ""
    },
    {
        "id": "7d3485a6.17186c",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#77bb40",
                "baseFont": "Tahoma,Geneva,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#094779",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#32A359",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": true
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": true
                },
                "page-sidebar-backgroundColor": {
                    "value": "#000000",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": true
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": true
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": true
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": true
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": true
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": true
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "brew2",
            "hideToolbar": "true",
            "allowSwipe": "false",
            "allowTempTheme": "false",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 45,
                "sy": 45,
                "gx": 5,
                "gy": 5,
                "cx": 5,
                "cy": 5,
                "px": 5,
                "py": 5
            },
            "lockMenu": "false"
        }
    },
    {
        "id": "c80f8188.af665",
        "type": "ui_tab",
        "z": "",
        "name": "Brew",
        "icon": "",
        "order": 1,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "ef3bd2b4.11dc9",
        "type": "ui_group",
        "z": "",
        "name": "MLT",
        "tab": "c80f8188.af665",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "9f772b70.e760a8",
        "type": "ui_group",
        "z": "",
        "name": "BOIL",
        "tab": "c80f8188.af665",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "6f2d723f.543a7c",
        "type": "ui_group",
        "z": "",
        "name": "BOIL SETTINGS",
        "tab": "bc787348.6f103",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "7740c90e.be9018",
        "type": "ui_tab",
        "z": "",
        "name": "Mlt Settings",
        "icon": "",
        "order": 4,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "bc787348.6f103",
        "type": "ui_tab",
        "z": "",
        "name": "Boil Settings",
        "icon": "",
        "order": 5,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "ba44c0e3.3df96",
        "type": "ui_group",
        "z": "",
        "name": "BOTTOM",
        "tab": "c80f8188.af665",
        "order": 5,
        "disp": false,
        "width": "6",
        "collapse": false
    },
    {
        "id": "a4679545.11e418",
        "type": "influxdb",
        "z": "",
        "hostname": "127.0.0.1",
        "port": "8086",
        "protocol": "http",
        "database": "brew2",
        "name": "",
        "usetls": false,
        "tls": ""
    },
    {
        "id": "bed33542.220c78",
        "type": "ui_tab",
        "z": "",
        "name": "General Settings",
        "icon": "dashboard",
        "order": 6,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "e0b79df4.25a96",
        "type": "ui_group",
        "z": "",
        "name": "LOGGING",
        "tab": "bed33542.220c78",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "22404b9.7ee1fb4",
        "type": "ui_tab",
        "z": "",
        "name": "Settings",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "9986f894.2e7808",
        "type": "ui_group",
        "z": "",
        "name": "SETTINGS",
        "tab": "22404b9.7ee1fb4",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "47b1ff72.129c3",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "9986f894.2e7808",
        "order": 4,
        "width": "6",
        "height": 1
    },
    {
        "id": "903f5af.60368a8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "e0b79df4.25a96",
        "order": 6,
        "width": 6,
        "height": 1
    },
    {
        "id": "76c20871.6989d8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "6f2d723f.543a7c",
        "order": 10,
        "width": "6",
        "height": 1
    },
    {
        "id": "cb2b336a.0ab76",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 11,
        "width": "1",
        "height": 1
    },
    {
        "id": "d227a0df.cb626",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 13,
        "width": "1",
        "height": 1
    },
    {
        "id": "221c9e76.fde642",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "",
        "order": 11,
        "width": 6,
        "height": 1
    },
    {
        "id": "e314be26.7cdc7",
        "type": "ui_group",
        "z": "",
        "name": "HLT",
        "tab": "c80f8188.af665",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "324195e7.61687a",
        "type": "ui_tab",
        "z": "",
        "name": "Hlt Settings",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": true
    },
    {
        "id": "2b9485f6.57f89a",
        "type": "ui_group",
        "z": "",
        "name": "HLT SETTINGS",
        "tab": "324195e7.61687a",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "9ce4e30a.c71b1",
        "type": "ui_group",
        "z": "",
        "name": "MLT SETTINGS",
        "tab": "7740c90e.be9018",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "852429a5.3a6f58",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "e314be26.7cdc7",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "bdc112f5.91985",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "e314be26.7cdc7",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "cfe98001.9b3d9",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "e314be26.7cdc7",
        "order": 8,
        "width": 1,
        "height": 1
    },
    {
        "id": "d54e84d5.43a7b8",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "e314be26.7cdc7",
        "order": 9,
        "width": 6,
        "height": 1
    },
    {
        "id": "213ad246.1d204e",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "e314be26.7cdc7",
        "order": 10,
        "width": 6,
        "height": 1
    },
    {
        "id": "c12ed9d7.847a98",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "ef3bd2b4.11dc9",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "f6edb6c4.a70248",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "ef3bd2b4.11dc9",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "58c67ab9.885a54",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "ef3bd2b4.11dc9",
        "order": 8,
        "width": 1,
        "height": 1
    },
    {
        "id": "c6a064b3.789f38",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "ef3bd2b4.11dc9",
        "order": 9,
        "width": 6,
        "height": 1
    },
    {
        "id": "edd9ad13.b29be",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "ef3bd2b4.11dc9",
        "order": 10,
        "width": 6,
        "height": 1
    },
    {
        "id": "329ee44f.c0475c",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "9f772b70.e760a8",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "6c0adaa5.c744a4",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "9f772b70.e760a8",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "190f1254.d815fe",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "9f772b70.e760a8",
        "order": 8,
        "width": 1,
        "height": 1
    },
    {
        "id": "dd3d0083.5de26",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "9f772b70.e760a8",
        "order": 10,
        "width": 3,
        "height": 1
    },
    {
        "id": "9d3dd4f.f644528",
        "type": "ui_spacer",
        "name": "spacer",
        "group": "9f772b70.e760a8",
        "order": 15,
        "width": 4,
        "height": 1
    },
    {
        "id": "1494fd81.14ee02",
        "type": "ui_text",
        "z": "2661457f.e66b3a",
        "group": "e314be26.7cdc7",
        "order": 11,
        "width": 2,
        "height": 1,
        "name": "HLT temperature display",
        "label": "Kettle",
        "format": "{{msg.payload | number:1}}°C",
        "layout": "col-center",
        "x": 450,
        "y": 140,
        "wires": []
    },
    {
        "id": "b473d29b.c729",
        "type": "smooth",
        "z": "2661457f.e66b3a",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "5",
        "round": "2",
        "mult": "single",
        "x": 360,
        "y": 100,
        "wires": [
            [
                "1494fd81.14ee02"
            ]
        ]
    },
    {
        "id": "63495b87.f90024",
        "type": "range",
        "z": "defe4cfa.b127d",
        "minin": "0",
        "maxin": "4096",
        "minout": "0",
        "maxout": "61.2",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "cmH₂O",
        "x": 180,
        "y": 100,
        "wires": [
            [
                "466f8523.645fec"
            ]
        ]
    },
    {
        "id": "466f8523.645fec",
        "type": "smooth",
        "z": "defe4cfa.b127d",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "5",
        "round": "2",
        "mult": "single",
        "x": 220,
        "y": 140,
        "wires": [
            [
                "ea3d9e9a.a8f45"
            ]
        ]
    },
    {
        "id": "3926f638.c74d3a",
        "type": "function",
        "z": "defe4cfa.b127d",
        "name": "Volume conversion",
        "func": "msg.payload = 1.89 + (msg.payload * 21.5 * 21.5 * 3.141526 / 1000);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 330,
        "y": 220,
        "wires": [
            [
                "45b69664.6d6bc8"
            ]
        ]
    },
    {
        "id": "9e52a3c2.998c4",
        "type": "ui_text",
        "z": "defe4cfa.b127d",
        "d": true,
        "group": "ba44c0e3.3df96",
        "order": 2,
        "width": 3,
        "height": 1,
        "name": "Mash volume display",
        "label": "Volume",
        "format": "{{msg.payload}}l H₂O",
        "layout": "col-center",
        "x": 420,
        "y": 300,
        "wires": []
    },
    {
        "id": "ea3d9e9a.a8f45",
        "type": "function",
        "z": "defe4cfa.b127d",
        "name": "WC calibration",
        "func": "msg.payload = -11.182129 + 1.392048*msg.payload \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 280,
        "y": 180,
        "wires": [
            [
                "3926f638.c74d3a",
                "d805a53f.aa0308"
            ]
        ]
    },
    {
        "id": "45b69664.6d6bc8",
        "type": "function",
        "z": "defe4cfa.b127d",
        "name": "Minimum volume",
        "func": "if(msg.payload <= 12.0){\n    msg.payload = \"<12.0\"\n} else {\n    msg.payload = msg.payload.toFixed(1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 370,
        "y": 260,
        "wires": [
            [
                "9e52a3c2.998c4"
            ]
        ]
    },
    {
        "id": "6914f53.2d8fa0c",
        "type": "rpi-gpio out",
        "z": "ec35014e.440c6",
        "name": "Pump GPIO",
        "pin": "33",
        "set": true,
        "level": "0",
        "freq": "1",
        "out": "out",
        "x": 650,
        "y": 740,
        "wires": []
    },
    {
        "id": "38edb8f8.5b92e8",
        "type": "inject",
        "z": "87542114.410a9",
        "name": "Default Element Duty",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "100",
        "payloadType": "num",
        "x": 160,
        "y": 180,
        "wires": [
            [
                "863d3629.3f4ac8",
                "b6e375b4.1ec868",
                "15877e80.4e0602"
            ]
        ]
    },
    {
        "id": "53cc2adc.0db864",
        "type": "change",
        "z": "87542114.410a9",
        "name": "bk_lock=true",
        "rules": [
            {
                "t": "set",
                "p": "bk_lock",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "524cadd.05b6154",
        "type": "change",
        "z": "87542114.410a9",
        "name": "bk_on = bk_try",
        "rules": [
            {
                "t": "set",
                "p": "bk_on",
                "pt": "global",
                "to": "bk_try",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "bk_try",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 1400,
        "wires": [
            [
                "97d9a182.cafc4",
                "bf3b6903.c635c8"
            ]
        ]
    },
    {
        "id": "97d9a182.cafc4",
        "type": "switch",
        "z": "87542114.410a9",
        "name": "bk_on",
        "property": "bk_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 690,
        "y": 1420,
        "wires": [
            [
                "53cc2adc.0db864"
            ],
            [
                "ebcd10f2.7498d"
            ]
        ]
    },
    {
        "id": "ebcd10f2.7498d",
        "type": "delay",
        "z": "87542114.410a9",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 840,
        "y": 1440,
        "wires": [
            [
                "c6062574.5f4e38"
            ]
        ]
    },
    {
        "id": "c6062574.5f4e38",
        "type": "change",
        "z": "87542114.410a9",
        "name": "bk_lock = false",
        "rules": [
            {
                "t": "set",
                "p": "bk_lock",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 1480,
        "wires": [
            [
                "f8ffebaa.709208"
            ]
        ]
    },
    {
        "id": "f8ffebaa.709208",
        "type": "link out",
        "z": "87542114.410a9",
        "name": "Bolt update",
        "links": [
            "93befc16.2ca578",
            "b05b4104.4b7748",
            "a0d524b2.529a4",
            "f8471ffc.3e73c",
            "98071683.576448"
        ],
        "x": 875,
        "y": 1520,
        "wires": []
    },
    {
        "id": "bf3b6903.c635c8",
        "type": "link out",
        "z": "87542114.410a9",
        "name": "Bolt update",
        "links": [
            "93befc16.2ca578",
            "b05b4104.4b7748",
            "a0d524b2.529a4",
            "f8471ffc.3e73c",
            "98071683.576448"
        ],
        "x": 655,
        "y": 1460,
        "wires": []
    },
    {
        "id": "d805a53f.aa0308",
        "type": "function",
        "z": "defe4cfa.b127d",
        "name": "Minimum WC",
        "func": "if(msg.payload <= 5.0){\n    msg.payload = \"<5.0\"\n} else {\n    msg.payload = msg.payload.toFixed(1);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 620,
        "y": 260,
        "wires": [
            [
                "333652a8.de241e"
            ]
        ]
    },
    {
        "id": "333652a8.de241e",
        "type": "ui_text",
        "z": "defe4cfa.b127d",
        "d": true,
        "group": "ba44c0e3.3df96",
        "order": 3,
        "width": 3,
        "height": 1,
        "name": "Mash WC display",
        "label": "Water column",
        "format": "{{msg.payload}} cmH₂O",
        "layout": "col-center",
        "x": 670,
        "y": 300,
        "wires": []
    },
    {
        "id": "2049a197.d3fd7e",
        "type": "sensor-ds18b20",
        "z": "2661457f.e66b3a",
        "name": "temp-HLT",
        "sensorid": "28-041657bcbdff",
        "timer": "2",
        "repeat": false,
        "x": 320,
        "y": 60,
        "wires": [
            [
                "b473d29b.c729",
                "fef78bfd.c46dc8",
                "fb420c49.a564f"
            ]
        ]
    },
    {
        "id": "3b522251.205f8e",
        "type": "inject",
        "z": "2661457f.e66b3a",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "2",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 110,
        "y": 60,
        "wires": [
            [
                "2049a197.d3fd7e",
                "f7ce09bf.c2c1d8",
                "9fbccece.26f7",
                "62be8967.9942f8"
            ]
        ]
    },
    {
        "id": "dd6a02e.8c863",
        "type": "ui_numeric",
        "z": "87542114.410a9",
        "name": "",
        "label": "K𝗉",
        "tooltip": "",
        "group": "6f2d723f.543a7c",
        "order": 4,
        "width": "4",
        "height": "1",
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "99.8",
        "step": "0.2",
        "x": 150,
        "y": 500,
        "wires": [
            [
                "6873f3c5.4deeac"
            ]
        ]
    },
    {
        "id": "6d81f4b6.9d591c",
        "type": "ui_numeric",
        "z": "87542114.410a9",
        "name": "",
        "label": "K𝗂",
        "tooltip": "",
        "group": "6f2d723f.543a7c",
        "order": 6,
        "width": "4",
        "height": "1",
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "100",
        "step": "0.2",
        "x": 150,
        "y": 600,
        "wires": [
            [
                "d11450bd.cc1ab"
            ]
        ]
    },
    {
        "id": "e7a97310.1485d",
        "type": "ui_numeric",
        "z": "87542114.410a9",
        "name": "",
        "label": "K𝖽",
        "tooltip": "",
        "group": "6f2d723f.543a7c",
        "order": 8,
        "width": "4",
        "height": "1",
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "100",
        "step": "0.2",
        "x": 150,
        "y": 700,
        "wires": [
            [
                "f773ec9c.30b2d"
            ]
        ]
    },
    {
        "id": "6873f3c5.4deeac",
        "type": "change",
        "z": "87542114.410a9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "p",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "d11450bd.cc1ab",
        "type": "change",
        "z": "87542114.410a9",
        "name": "set flow.i",
        "rules": [
            {
                "t": "set",
                "p": "i",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "f773ec9c.30b2d",
        "type": "change",
        "z": "87542114.410a9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "fe3e5db0.b5a6d",
        "type": "inject",
        "z": "87542114.410a9",
        "name": "Default P",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "48",
        "payloadType": "num",
        "x": 120,
        "y": 460,
        "wires": [
            [
                "dd6a02e.8c863",
                "6873f3c5.4deeac"
            ]
        ]
    },
    {
        "id": "4faa328e.7f643c",
        "type": "inject",
        "z": "87542114.410a9",
        "name": "Default I",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0.02",
        "payloadType": "num",
        "x": 120,
        "y": 560,
        "wires": [
            [
                "6d81f4b6.9d591c",
                "d11450bd.cc1ab"
            ]
        ]
    },
    {
        "id": "293abd32.33dae2",
        "type": "inject",
        "z": "87542114.410a9",
        "name": "Default D",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "10",
        "payloadType": "num",
        "x": 120,
        "y": 660,
        "wires": [
            [
                "e7a97310.1485d",
                "f773ec9c.30b2d"
            ]
        ]
    },
    {
        "id": "ec75d915.de55f8",
        "type": "inject",
        "z": "87542114.410a9",
        "name": "Default BK Target",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "70",
        "payloadType": "num",
        "x": 150,
        "y": 300,
        "wires": [
            [
                "ac0b9baa.2a8a48",
                "bc20b2fc.eefa5",
                "669a5f54.bf9e8",
                "27b18a6e.1c6696"
            ]
        ]
    },
    {
        "id": "9665bca6.bf0e7",
        "type": "function",
        "z": "87542114.410a9",
        "name": "BK PID",
        "func": "// Note that the algorithm provided below assumes a 1 second iteration time\n// Justin Angevaare\n// May 2018\n\n// Set temperature\nmsg.temperature =  msg.payload;\n\n// Well that node doesn't work... do manually\nmsg.interval = 2000\n\n// Calculate error\nmsg.error = flow.get('bk_target') - msg.temperature;\n\n// Set output max\nmsg.max_output = 100\n        \n// Calculate integrator max\nmsg.integrator_max = msg.max_output/flow.get('i');\n\n// Update integrator\n// For purposes of integrator, bound error by [-1, 1]\nmsg.integrator = flow.get('integrator');\nmsg.integrator += (msg.interval/1000) * Math.max(Math.min(msg.error, 1), -1);\n\n// Bound total integrator by absolute maximum\nmsg.integrator = Math.max(Math.min(msg.integrator, msg.integrator_max), -msg.integrator_max);\n\n// Output updated integrator to flow context\nflow.set('integrator', msg.integrator);\n\n// Calculate proportional action\nmsg.output = msg.error * flow.get('p');\n\n// Calculate intergral action\nmsg.output += msg.integrator * flow.get('i');\n\n// Calculate derivative action\nmsg.derivative = (msg.error - flow.get('last_error'))/(msg.interval/1000);\nmsg.output += msg.derivative * flow.get('d');\n\n// Bound output by [0, max_output]\nmsg.output = Math.max(Math.min(msg.output, msg.max_output), 0);\n\n// Output updated last_error to flow context\nmsg.last_error = msg.error;\nflow.set('last_error', msg.last_error);\n\n// Set payload to element output\nmsg.payload = msg.output;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 480,
        "y": 80,
        "wires": [
            [
                "66f7a048.da787",
                "b8303c9f.48fd7"
            ]
        ]
    },
    {
        "id": "c0b9d775.9265f8",
        "type": "switch",
        "z": "87542114.410a9",
        "name": "bk_pid switch",
        "property": "bk_pid",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 300,
        "y": 100,
        "wires": [
            [
                "9665bca6.bf0e7"
            ],
            [
                "3c94ecd5.54c3c4"
            ]
        ]
    },
    {
        "id": "3c94ecd5.54c3c4",
        "type": "change",
        "z": "87542114.410a9",
        "name": "payload = bk_manual_duty",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "bk_manual_duty",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 120,
        "wires": [
            [
                "66f7a048.da787"
            ]
        ]
    },
    {
        "id": "3c82d582.229d9a",
        "type": "link in",
        "z": "87542114.410a9",
        "name": "BK PID temperature input",
        "links": [
            "459c110c.d24b3",
            "5d334d36.db79c4"
        ],
        "x": 55,
        "y": 80,
        "wires": [
            [
                "e8ecb5b.bfc7c48",
                "b363b235.9ea8f"
            ]
        ]
    },
    {
        "id": "fef78bfd.c46dc8",
        "type": "link out",
        "z": "2661457f.e66b3a",
        "name": "BK raw temperature",
        "links": [
            "7ff5440e.05101c",
            "dce5b289.cb0a8"
        ],
        "x": 515,
        "y": 60,
        "wires": []
    },
    {
        "id": "bc20b2fc.eefa5",
        "type": "change",
        "z": "87542114.410a9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "bk_target",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "66f7a048.da787",
        "type": "link out",
        "z": "87542114.410a9",
        "name": "PID or Manual Duty",
        "links": [
            "49b6161d.0beb38",
            "7acd3c83.cc5404",
            "bc46a213.2ee13"
        ],
        "x": 715,
        "y": 80,
        "wires": []
    },
    {
        "id": "aaeb4f2c.ef3e5",
        "type": "change",
        "z": "87542114.410a9",
        "name": "bk_pid, bk_try = true",
        "rules": [
            {
                "t": "set",
                "p": "bk_pid",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "bk_try",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 1020,
        "wires": [
            [
                "df93f18f.df24b"
            ]
        ]
    },
    {
        "id": "9e97f69a.e64fc8",
        "type": "change",
        "z": "87542114.410a9",
        "name": "bk_pid = false, bk_try = true",
        "rules": [
            {
                "t": "set",
                "p": "bk_pid",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "bk_try",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 1060,
        "wires": [
            [
                "c26eed64.53759"
            ]
        ]
    },
    {
        "id": "eef3d1b5.2ff06",
        "type": "change",
        "z": "87542114.410a9",
        "name": "bk_pid, bk_try = false",
        "rules": [
            {
                "t": "set",
                "p": "bk_pid",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "bk_try",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 980,
        "wires": [
            [
                "1f946893.c3fdc7"
            ]
        ]
    },
    {
        "id": "c26eed64.53759",
        "type": "link out",
        "z": "87542114.410a9",
        "name": "Boil Try Output",
        "links": [
            "61875c9a.d36504"
        ],
        "x": 535,
        "y": 1060,
        "wires": []
    },
    {
        "id": "61875c9a.d36504",
        "type": "link in",
        "z": "87542114.410a9",
        "name": "Boil Try Input",
        "links": [
            "c26eed64.53759",
            "df93f18f.df24b",
            "1f946893.c3fdc7"
        ],
        "x": 155,
        "y": 1400,
        "wires": [
            [
                "524cadd.05b6154"
            ]
        ]
    },
    {
        "id": "e8ecb5b.bfc7c48",
        "type": "switch",
        "z": "87542114.410a9",
        "name": "bk_on",
        "property": "bk_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 150,
        "y": 100,
        "wires": [
            [
                "c0b9d775.9265f8"
            ]
        ]
    },
    {
        "id": "b6e375b4.1ec868",
        "type": "change",
        "z": "87542114.410a9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "bk_manual_duty",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "8e238e6d.0eb5a",
        "type": "change",
        "z": "87542114.410a9",
        "name": "payload = 0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 1220,
        "wires": [
            [
                "3352c817.f10c48"
            ]
        ]
    },
    {
        "id": "3352c817.f10c48",
        "type": "link out",
        "z": "87542114.410a9",
        "name": "Off Duty",
        "links": [
            "49b6161d.0beb38",
            "7acd3c83.cc5404",
            "bc46a213.2ee13"
        ],
        "x": 535,
        "y": 1220,
        "wires": []
    },
    {
        "id": "2d557121.1b7e5e",
        "type": "link out",
        "z": "87542114.410a9",
        "name": "Boil PID display",
        "links": [
            "5285e8f7.b9ad08",
            "eda67ad.0cd1d88",
            "ec8d386b.e7dee8",
            "bbe8803.52f648"
        ],
        "x": 535,
        "y": 1140,
        "wires": []
    },
    {
        "id": "ddb4d187.891aa",
        "type": "rpi-gpio out",
        "z": "cc79254f.7430d8",
        "name": "MLT GPIO",
        "pin": "36",
        "set": false,
        "level": "0",
        "freq": "1",
        "out": "pwm",
        "x": 310,
        "y": 240,
        "wires": []
    },
    {
        "id": "a6bd74ad.129b18",
        "type": "link in",
        "z": "cc79254f.7430d8",
        "name": "MLT GPIO",
        "links": [
            "cb64fb4.6088108",
            "c85e9945.a327c8"
        ],
        "x": 175,
        "y": 260,
        "wires": [
            [
                "ddb4d187.891aa",
                "5f445c49.3c4534",
                "913ada9c.fc9ea8"
            ]
        ]
    },
    {
        "id": "5f445c49.3c4534",
        "type": "range",
        "z": "cc79254f.7430d8",
        "minin": "0",
        "maxin": "100",
        "minout": "0",
        "maxout": "5.5",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "Duty to watts",
        "x": 310,
        "y": 280,
        "wires": [
            [
                "90fcb4d2.7ac4f8"
            ]
        ]
    },
    {
        "id": "90fcb4d2.7ac4f8",
        "type": "ui_text",
        "z": "cc79254f.7430d8",
        "group": "ef3bd2b4.11dc9",
        "order": 6,
        "width": 3,
        "height": 1,
        "name": "Element output",
        "label": " ",
        "format": "{{payload | number:2}} kw",
        "layout": "row-left",
        "x": 360,
        "y": 320,
        "wires": []
    },
    {
        "id": "674c6552.8287fc",
        "type": "change",
        "z": "87542114.410a9",
        "name": "Zero everything",
        "rules": [
            {
                "t": "set",
                "p": "last_error",
                "pt": "msg",
                "to": "0.0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "integrator",
                "pt": "msg",
                "to": "0.0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "derivative",
                "pt": "msg",
                "to": "0.0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "last_error",
                "pt": "flow",
                "to": "last_error",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "integrator",
                "pt": "flow",
                "to": "integrator",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "output",
                "pt": "msg",
                "to": "0.0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "target",
                "pt": "msg",
                "to": "bk_target",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 1140,
        "wires": [
            [
                "2d557121.1b7e5e"
            ]
        ]
    },
    {
        "id": "b8303c9f.48fd7",
        "type": "link out",
        "z": "87542114.410a9",
        "name": "Boil PID display",
        "links": [
            "5285e8f7.b9ad08",
            "eda67ad.0cd1d88",
            "ec8d386b.e7dee8",
            "bbe8803.52f648"
        ],
        "x": 595,
        "y": 40,
        "wires": []
    },
    {
        "id": "913ada9c.fc9ea8",
        "type": "ui_text",
        "z": "cc79254f.7430d8",
        "group": "9ce4e30a.c71b1",
        "order": 3,
        "width": "2",
        "height": "1",
        "name": "HLT Element duty",
        "label": "Output",
        "format": "{{payload | number:0}}﹪",
        "layout": "col-center",
        "x": 370,
        "y": 360,
        "wires": []
    },
    {
        "id": "89767b41.6f9d48",
        "type": "link in",
        "z": "87542114.410a9",
        "name": "PID button",
        "links": [
            "89ce3e25.3ad2f8",
            "48eb4d85.4cdb44"
        ],
        "x": 155,
        "y": 1020,
        "wires": [
            [
                "aaeb4f2c.ef3e5"
            ]
        ]
    },
    {
        "id": "df93f18f.df24b",
        "type": "link out",
        "z": "87542114.410a9",
        "name": "Boil Try Output",
        "links": [
            "61875c9a.d36504"
        ],
        "x": 535,
        "y": 1020,
        "wires": []
    },
    {
        "id": "1f946893.c3fdc7",
        "type": "link out",
        "z": "87542114.410a9",
        "name": "Boil Try Output",
        "links": [
            "61875c9a.d36504"
        ],
        "x": 535,
        "y": 980,
        "wires": []
    },
    {
        "id": "4ab4a716.1c0768",
        "type": "link in",
        "z": "87542114.410a9",
        "name": "Manual button",
        "links": [
            "ed41478a.5a2028",
            "9ea3dee1.d466d"
        ],
        "x": 155,
        "y": 1060,
        "wires": [
            [
                "9e97f69a.e64fc8"
            ]
        ]
    },
    {
        "id": "87d267a6.5d32d8",
        "type": "link in",
        "z": "87542114.410a9",
        "name": "Manual button",
        "links": [
            "ed41478a.5a2028",
            "9ea3dee1.d466d"
        ],
        "x": 155,
        "y": 1100,
        "wires": [
            [
                "674c6552.8287fc"
            ]
        ]
    },
    {
        "id": "b4e23ef3.544f6",
        "type": "link in",
        "z": "87542114.410a9",
        "name": "Off button",
        "links": [
            "c6607c20.8aa8",
            "11c18a22.2ff07e",
            "fd8c477a.99a1a"
        ],
        "x": 155,
        "y": 980,
        "wires": [
            [
                "eef3d1b5.2ff06"
            ]
        ]
    },
    {
        "id": "ebaaa5b1.4a1ff8",
        "type": "link in",
        "z": "87542114.410a9",
        "name": "Off button",
        "links": [
            "9f21ded0.2757",
            "d068c868.178e4",
            "c6607c20.8aa8",
            "11c18a22.2ff07e",
            "fd8c477a.99a1a"
        ],
        "x": 155,
        "y": 1220,
        "wires": [
            [
                "8e238e6d.0eb5a"
            ]
        ]
    },
    {
        "id": "3a6c6acb.0f4fb6",
        "type": "inject",
        "z": "87542114.410a9",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 760,
        "wires": [
            [
                "9f21ded0.2757"
            ]
        ]
    },
    {
        "id": "c2aef427.0df868",
        "type": "link in",
        "z": "87542114.410a9",
        "name": "Off button",
        "links": [
            "c6607c20.8aa8",
            "9f21ded0.2757",
            "11c18a22.2ff07e",
            "fd8c477a.99a1a"
        ],
        "x": 155,
        "y": 1140,
        "wires": [
            [
                "674c6552.8287fc"
            ]
        ]
    },
    {
        "id": "9f21ded0.2757",
        "type": "link out",
        "z": "87542114.410a9",
        "name": "Off button - initialization",
        "links": [
            "ebaaa5b1.4a1ff8",
            "ec243c37.7ea6d",
            "c2aef427.0df868"
        ],
        "x": 295,
        "y": 760,
        "wires": []
    },
    {
        "id": "7f385245.ef743c",
        "type": "ui_button",
        "z": "ec8d6491.d7cdd8",
        "name": "",
        "group": "9f772b70.e760a8",
        "order": 4,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Manual",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 300,
        "y": 100,
        "wires": [
            [
                "9ea3dee1.d466d"
            ]
        ]
    },
    {
        "id": "a4c93a89.fcc2e8",
        "type": "ui_button",
        "z": "ec8d6491.d7cdd8",
        "name": "",
        "group": "9f772b70.e760a8",
        "order": 2,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "PID",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 290,
        "y": 60,
        "wires": [
            [
                "48eb4d85.4cdb44"
            ]
        ]
    },
    {
        "id": "7c2d7550.3cb32c",
        "type": "ui_button",
        "z": "ec8d6491.d7cdd8",
        "name": "",
        "group": "9f772b70.e760a8",
        "order": 7,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "false",
        "payloadType": "bool",
        "topic": "",
        "x": 290,
        "y": 140,
        "wires": [
            [
                "c6607c20.8aa8"
            ]
        ]
    },
    {
        "id": "189dd181.db467e",
        "type": "link in",
        "z": "ec8d6491.d7cdd8",
        "name": "PID button colour",
        "links": [
            "d4b4b2c7.122de",
            "cd8fd53.01d4928"
        ],
        "x": 175,
        "y": 60,
        "wires": [
            [
                "a4c93a89.fcc2e8"
            ]
        ]
    },
    {
        "id": "2c508a92.93e776",
        "type": "link in",
        "z": "ec8d6491.d7cdd8",
        "name": "Manual button colour",
        "links": [
            "b40d94bd.aaf658"
        ],
        "x": 175,
        "y": 100,
        "wires": [
            [
                "7f385245.ef743c"
            ]
        ]
    },
    {
        "id": "a6f16124.d14f5",
        "type": "link in",
        "z": "ec8d6491.d7cdd8",
        "name": "Off button colour",
        "links": [
            "a0920773.419b98"
        ],
        "x": 175,
        "y": 140,
        "wires": [
            [
                "7c2d7550.3cb32c"
            ]
        ]
    },
    {
        "id": "48eb4d85.4cdb44",
        "type": "link out",
        "z": "ec8d6491.d7cdd8",
        "name": "PID button",
        "links": [
            "89767b41.6f9d48",
            "493d43d9.13529c",
            "1b02915f.7e7a8f",
            "79dc2eb1.5ad62"
        ],
        "x": 415,
        "y": 60,
        "wires": []
    },
    {
        "id": "9ea3dee1.d466d",
        "type": "link out",
        "z": "ec8d6491.d7cdd8",
        "name": "Manual button",
        "links": [
            "493d43d9.13529c",
            "4ab4a716.1c0768",
            "87d267a6.5d32d8",
            "1b02915f.7e7a8f",
            "79dc2eb1.5ad62"
        ],
        "x": 415,
        "y": 100,
        "wires": []
    },
    {
        "id": "c6607c20.8aa8",
        "type": "link out",
        "z": "ec8d6491.d7cdd8",
        "name": "Off button",
        "links": [
            "c2aef427.0df868",
            "493d43d9.13529c",
            "1b02915f.7e7a8f",
            "ebaaa5b1.4a1ff8",
            "79dc2eb1.5ad62",
            "b4e23ef3.544f6"
        ],
        "x": 415,
        "y": 140,
        "wires": []
    },
    {
        "id": "71a7e453.572d9c",
        "type": "delay",
        "z": "ec8d6491.d7cdd8",
        "name": "delay",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 290,
        "y": 300,
        "wires": [
            [
                "aac1f5f9.3dd518"
            ]
        ]
    },
    {
        "id": "d4b4b2c7.122de",
        "type": "link out",
        "z": "ec8d6491.d7cdd8",
        "name": "PID button colour",
        "links": [
            "189dd181.db467e"
        ],
        "x": 735,
        "y": 320,
        "wires": []
    },
    {
        "id": "493d43d9.13529c",
        "type": "link in",
        "z": "ec8d6491.d7cdd8",
        "name": "Button click",
        "links": [
            "9ea3dee1.d466d",
            "c6607c20.8aa8",
            "48eb4d85.4cdb44",
            "11c18a22.2ff07e",
            "fd8c477a.99a1a"
        ],
        "x": 175,
        "y": 300,
        "wires": [
            [
                "71a7e453.572d9c"
            ]
        ]
    },
    {
        "id": "1cd75303.a1023d",
        "type": "change",
        "z": "ec8d6491.d7cdd8",
        "name": "off colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 440,
        "wires": [
            [
                "b40d94bd.aaf658"
            ]
        ]
    },
    {
        "id": "f5b2b140.bb642",
        "type": "change",
        "z": "ec8d6491.d7cdd8",
        "name": "on colour",
        "rules": [
            {
                "t": "set",
                "p": "gold",
                "pt": "msg",
                "to": "#3e9914",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 400,
        "wires": [
            [
                "b40d94bd.aaf658"
            ]
        ]
    },
    {
        "id": "ffac542d.93d968",
        "type": "switch",
        "z": "ec8d6491.d7cdd8",
        "name": "",
        "property": "bk_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 440,
        "wires": [
            [
                "f6279264.923f2"
            ],
            [
                "1cd75303.a1023d"
            ]
        ]
    },
    {
        "id": "150e343f.0c9a8c",
        "type": "delay",
        "z": "ec8d6491.d7cdd8",
        "name": "delay",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 290,
        "y": 400,
        "wires": [
            [
                "ffac542d.93d968"
            ]
        ]
    },
    {
        "id": "b40d94bd.aaf658",
        "type": "link out",
        "z": "ec8d6491.d7cdd8",
        "name": "Manual button colour",
        "links": [
            "2c508a92.93e776"
        ],
        "x": 735,
        "y": 420,
        "wires": []
    },
    {
        "id": "c131dcc0.a327f",
        "type": "change",
        "z": "ec8d6491.d7cdd8",
        "name": "off colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "#424242",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 540,
        "wires": [
            [
                "a0920773.419b98"
            ]
        ]
    },
    {
        "id": "33f7508e.624d6",
        "type": "change",
        "z": "ec8d6491.d7cdd8",
        "name": "on colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 500,
        "wires": [
            [
                "a0920773.419b98"
            ]
        ]
    },
    {
        "id": "7d12d920.2b4598",
        "type": "switch",
        "z": "ec8d6491.d7cdd8",
        "name": "",
        "property": "bk_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 450,
        "y": 520,
        "wires": [
            [
                "33f7508e.624d6"
            ],
            [
                "c131dcc0.a327f"
            ]
        ]
    },
    {
        "id": "64f1c454.c3e38c",
        "type": "delay",
        "z": "ec8d6491.d7cdd8",
        "name": "delay",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 290,
        "y": 500,
        "wires": [
            [
                "7d12d920.2b4598"
            ]
        ]
    },
    {
        "id": "a0920773.419b98",
        "type": "link out",
        "z": "ec8d6491.d7cdd8",
        "name": "Off button colour",
        "links": [
            "a6f16124.d14f5",
            "3e0efd1.4d98882",
            "c98ea849.baf91"
        ],
        "x": 735,
        "y": 520,
        "wires": []
    },
    {
        "id": "f6279264.923f2",
        "type": "switch",
        "z": "ec8d6491.d7cdd8",
        "name": "",
        "property": "bk_pid",
        "propertyType": "global",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 450,
        "y": 420,
        "wires": [
            [
                "f5b2b140.bb642"
            ],
            [
                "1cd75303.a1023d"
            ]
        ]
    },
    {
        "id": "aac1f5f9.3dd518",
        "type": "switch",
        "z": "ec8d6491.d7cdd8",
        "name": "",
        "property": "bk_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 340,
        "wires": [
            [
                "362e7ed6.5a3fa2"
            ],
            [
                "834e8183.fbad4"
            ]
        ]
    },
    {
        "id": "362e7ed6.5a3fa2",
        "type": "switch",
        "z": "ec8d6491.d7cdd8",
        "name": "",
        "property": "bk_pid",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 470,
        "y": 320,
        "wires": [
            [
                "74dfa3d0.ebed5c"
            ],
            [
                "834e8183.fbad4"
            ]
        ]
    },
    {
        "id": "74dfa3d0.ebed5c",
        "type": "change",
        "z": "ec8d6491.d7cdd8",
        "name": "on colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "gold",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 300,
        "wires": [
            [
                "d4b4b2c7.122de"
            ]
        ]
    },
    {
        "id": "834e8183.fbad4",
        "type": "change",
        "z": "ec8d6491.d7cdd8",
        "name": "off colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 340,
        "wires": [
            [
                "d4b4b2c7.122de"
            ]
        ]
    },
    {
        "id": "ec243c37.7ea6d",
        "type": "link in",
        "z": "87542114.410a9",
        "name": "Off button - initialization",
        "links": [
            "9f21ded0.2757"
        ],
        "x": 155,
        "y": 940,
        "wires": [
            [
                "cd925b46.241098"
            ]
        ]
    },
    {
        "id": "cd925b46.241098",
        "type": "change",
        "z": "87542114.410a9",
        "name": "bk_lock, bk_on, bk_pid, bk_try = false",
        "rules": [
            {
                "t": "set",
                "p": "bk_lock",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "bk_on",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "bk_pid",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "bk_try",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "79dc2eb1.5ad62",
        "type": "link in",
        "z": "ec8d6491.d7cdd8",
        "name": "Button click",
        "links": [
            "9ea3dee1.d466d",
            "c6607c20.8aa8",
            "48eb4d85.4cdb44",
            "11c18a22.2ff07e",
            "fd8c477a.99a1a"
        ],
        "x": 175,
        "y": 400,
        "wires": [
            [
                "150e343f.0c9a8c"
            ]
        ]
    },
    {
        "id": "1b02915f.7e7a8f",
        "type": "link in",
        "z": "ec8d6491.d7cdd8",
        "name": "Button click",
        "links": [
            "9ea3dee1.d466d",
            "c6607c20.8aa8",
            "48eb4d85.4cdb44",
            "11c18a22.2ff07e",
            "fd8c477a.99a1a"
        ],
        "x": 175,
        "y": 500,
        "wires": [
            [
                "64f1c454.c3e38c"
            ]
        ]
    },
    {
        "id": "11f11ae7.4d37a5",
        "type": "link in",
        "z": "ec8d6491.d7cdd8",
        "name": "Button initialization",
        "links": [
            "a902d194.51df48",
            "b6ff306b.e4db4"
        ],
        "x": 175,
        "y": 340,
        "wires": [
            [
                "aac1f5f9.3dd518"
            ]
        ]
    },
    {
        "id": "10223636.934faa",
        "type": "link in",
        "z": "ec8d6491.d7cdd8",
        "name": "Button initialization",
        "links": [
            "a902d194.51df48",
            "b6ff306b.e4db4"
        ],
        "x": 175,
        "y": 440,
        "wires": [
            [
                "ffac542d.93d968"
            ]
        ]
    },
    {
        "id": "f94489f1.360708",
        "type": "link in",
        "z": "ec8d6491.d7cdd8",
        "name": "Button initialization",
        "links": [
            "a902d194.51df48",
            "b6ff306b.e4db4"
        ],
        "x": 175,
        "y": 540,
        "wires": [
            [
                "7d12d920.2b4598"
            ]
        ]
    },
    {
        "id": "7a761526.a746bc",
        "type": "ui_ui_control",
        "z": "ec8d6491.d7cdd8",
        "name": "Dashboard connection",
        "x": 260,
        "y": 220,
        "wires": [
            [
                "b6ff306b.e4db4"
            ]
        ]
    },
    {
        "id": "b6ff306b.e4db4",
        "type": "link out",
        "z": "ec8d6491.d7cdd8",
        "name": "Button initialization on connection",
        "links": [
            "11f11ae7.4d37a5",
            "f94489f1.360708",
            "10223636.934faa"
        ],
        "x": 415,
        "y": 220,
        "wires": []
    },
    {
        "id": "669a5f54.bf9e8",
        "type": "ui_text",
        "z": "87542114.410a9",
        "group": "9f772b70.e760a8",
        "order": 13,
        "width": 2,
        "height": 1,
        "name": "Kettle target",
        "label": "Target",
        "format": "{{payload | number:1}}°C",
        "layout": "col-center",
        "x": 450,
        "y": 360,
        "wires": []
    },
    {
        "id": "ac0b9baa.2a8a48",
        "type": "ui_slider",
        "z": "87542114.410a9",
        "name": "Kettle target slider",
        "label": "Target",
        "tooltip": "",
        "group": "9f772b70.e760a8",
        "order": 16,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "all",
        "topic": "",
        "min": "25",
        "max": "100",
        "step": "0.5",
        "x": 190,
        "y": 340,
        "wires": [
            [
                "bc20b2fc.eefa5",
                "669a5f54.bf9e8",
                "27b18a6e.1c6696"
            ]
        ]
    },
    {
        "id": "863d3629.3f4ac8",
        "type": "ui_slider",
        "z": "87542114.410a9",
        "name": "Manual duty slider",
        "label": "Manual",
        "tooltip": "",
        "group": "9f772b70.e760a8",
        "order": 17,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "all",
        "topic": "",
        "min": "25",
        "max": "100",
        "step": "0.5",
        "x": 190,
        "y": 220,
        "wires": [
            [
                "b6e375b4.1ec868",
                "15877e80.4e0602"
            ]
        ]
    },
    {
        "id": "15877e80.4e0602",
        "type": "ui_text",
        "z": "87542114.410a9",
        "group": "9f772b70.e760a8",
        "order": 14,
        "width": 2,
        "height": 1,
        "name": "Manual duty",
        "label": "Manual",
        "format": "{{payload | number:0}}٪",
        "layout": "col-center",
        "x": 450,
        "y": 260,
        "wires": []
    },
    {
        "id": "28fc0f77.6321e",
        "type": "ui_ui_control",
        "z": "6de3a69b.f14158",
        "name": "UI navigation",
        "x": 450,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "c73dc9f4.c60ec8",
        "type": "ui_button",
        "z": "6de3a69b.f14158",
        "name": "",
        "group": "9986f894.2e7808",
        "order": 2,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "HLT PID",
        "tooltip": "",
        "color": "#757575",
        "bgcolor": "white",
        "icon": "",
        "payload": "2",
        "payloadType": "num",
        "topic": "",
        "x": 100,
        "y": 420,
        "wires": [
            [
                "28fc0f77.6321e"
            ]
        ]
    },
    {
        "id": "e203f41b.a28698",
        "type": "ui_button",
        "z": "6de3a69b.f14158",
        "name": "",
        "group": "9986f894.2e7808",
        "order": 3,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "MLT PID",
        "tooltip": "",
        "color": "#757575",
        "bgcolor": "white",
        "icon": "",
        "payload": "3",
        "payloadType": "num",
        "topic": "",
        "x": 100,
        "y": 500,
        "wires": [
            [
                "28fc0f77.6321e"
            ]
        ]
    },
    {
        "id": "5226e0ee.df786",
        "type": "ui_button",
        "z": "6de3a69b.f14158",
        "name": "",
        "group": "e0b79df4.25a96",
        "order": 12,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Back",
        "tooltip": "",
        "color": "#757575",
        "bgcolor": "#e0e0e0",
        "icon": "",
        "payload": "1",
        "payloadType": "num",
        "topic": "",
        "x": 90,
        "y": 460,
        "wires": [
            [
                "28fc0f77.6321e"
            ]
        ]
    },
    {
        "id": "c34f26e7.1184f8",
        "type": "ui_button",
        "z": "6de3a69b.f14158",
        "name": "",
        "group": "e0b79df4.25a96",
        "order": 11,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Back",
        "tooltip": "",
        "color": "#757575",
        "bgcolor": "#e0e0e0",
        "icon": "",
        "payload": "1",
        "payloadType": "num",
        "topic": "",
        "x": 90,
        "y": 540,
        "wires": [
            [
                "28fc0f77.6321e"
            ]
        ]
    },
    {
        "id": "feb42cdf.bc907",
        "type": "ui_template",
        "z": "6de3a69b.f14158",
        "group": "ef3bd2b4.11dc9",
        "name": "Ensure dashboard is displayed as 2 or 3 columns",
        "order": 16,
        "width": 0,
        "height": 0,
        "format": "<style>\n@media only screen and (min-width: 800px) { .masonry-container {\n    width: 1024px;\n}\n</style>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "global",
        "x": 230,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "c7ba67f4.bb2ba8",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "pump - off colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 440,
        "wires": [
            [
                "c052a51.3b9e158"
            ]
        ]
    },
    {
        "id": "9966ed41.380ec",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "pump - on colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "gold",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 400,
        "wires": [
            [
                "c052a51.3b9e158"
            ]
        ]
    },
    {
        "id": "1694ce91.7a4201",
        "type": "switch",
        "z": "ec35014e.440c6",
        "name": "Pump state",
        "property": "hlt_pump",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 430,
        "y": 420,
        "wires": [
            [
                "9966ed41.380ec"
            ],
            [
                "c7ba67f4.bb2ba8"
            ]
        ]
    },
    {
        "id": "32b2277b.4dd478",
        "type": "delay",
        "z": "ec35014e.440c6",
        "d": true,
        "name": "delay",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 370,
        "y": 380,
        "wires": [
            [
                "1694ce91.7a4201"
            ]
        ]
    },
    {
        "id": "c052a51.3b9e158",
        "type": "link out",
        "z": "ec35014e.440c6",
        "name": "Pump button colour",
        "links": [
            "1ad7bfd.c02c44"
        ],
        "x": 775,
        "y": 420,
        "wires": []
    },
    {
        "id": "92967958.b03fd8",
        "type": "link in",
        "z": "ec35014e.440c6",
        "name": "Pump update",
        "links": [
            "1ebe3085.7a658f"
        ],
        "x": 255,
        "y": 380,
        "wires": [
            [
                "32b2277b.4dd478",
                "1694ce91.7a4201"
            ]
        ]
    },
    {
        "id": "db9ef08a.403ae",
        "type": "inject",
        "z": "ec35014e.440c6",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "0",
                "vt": "num"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 210,
        "y": 40,
        "wires": [
            [
                "61a3f98a.8cd0b8",
                "dc144d18.c5609",
                "5724bf22.ef7c2"
            ]
        ]
    },
    {
        "id": "e412c8f.84c2a38",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "Pump update",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "hlt_pump",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 740,
        "wires": [
            [
                "6914f53.2d8fa0c"
            ]
        ]
    },
    {
        "id": "f18cc448.b55878",
        "type": "ui_button",
        "z": "ec35014e.440c6",
        "name": "",
        "group": "e314be26.7cdc7",
        "order": 16,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "HLT Pump",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 230,
        "y": 120,
        "wires": [
            [
                "a03db504.1fc5b8"
            ]
        ]
    },
    {
        "id": "1ad7bfd.c02c44",
        "type": "link in",
        "z": "ec35014e.440c6",
        "name": "Pump button colour",
        "links": [
            "c052a51.3b9e158"
        ],
        "x": 115,
        "y": 120,
        "wires": [
            [
                "f18cc448.b55878"
            ]
        ]
    },
    {
        "id": "2070dfa1.81bf2",
        "type": "ui_ui_control",
        "z": "ec35014e.440c6",
        "name": "Dashboard connection",
        "x": 220,
        "y": 420,
        "wires": [
            [
                "1694ce91.7a4201"
            ]
        ]
    },
    {
        "id": "a03db504.1fc5b8",
        "type": "switch",
        "z": "ec35014e.440c6",
        "name": "Pump state",
        "property": "hlt_pump",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 450,
        "y": 120,
        "wires": [
            [
                "bbeaa1f9.e2489"
            ],
            [
                "e7182ece.c2f09"
            ]
        ]
    },
    {
        "id": "e7182ece.c2f09",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "Turn off",
        "rules": [
            {
                "t": "set",
                "p": "hlt_pump",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 140,
        "wires": [
            [
                "1ebe3085.7a658f"
            ]
        ]
    },
    {
        "id": "bbeaa1f9.e2489",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "Turn on",
        "rules": [
            {
                "t": "set",
                "p": "hlt_pump",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 100,
        "wires": [
            [
                "1ebe3085.7a658f"
            ]
        ]
    },
    {
        "id": "1ebe3085.7a658f",
        "type": "link out",
        "z": "ec35014e.440c6",
        "name": "Pump update",
        "links": [
            "92967958.b03fd8",
            "87dc4ef.b7e71b"
        ],
        "x": 775,
        "y": 120,
        "wires": []
    },
    {
        "id": "61a3f98a.8cd0b8",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "hlt_pump",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "87dc4ef.b7e71b",
        "type": "link in",
        "z": "ec35014e.440c6",
        "name": "Pump update",
        "links": [
            "1ebe3085.7a658f"
        ],
        "x": 315,
        "y": 740,
        "wires": [
            [
                "e412c8f.84c2a38"
            ]
        ]
    },
    {
        "id": "b29d9bb6.d486d8",
        "type": "ui_text",
        "z": "e23d6dbe.65bd1",
        "group": "6f2d723f.543a7c",
        "order": 7,
        "width": "2",
        "height": "1",
        "name": "BK PID Integrator",
        "label": "Integral",
        "format": "{{integrator | number:1}}°C⦁s",
        "layout": "col-center",
        "x": 390,
        "y": 420,
        "wires": []
    },
    {
        "id": "bb175004.338cb",
        "type": "ui_text",
        "z": "e23d6dbe.65bd1",
        "group": "6f2d723f.543a7c",
        "order": 5,
        "width": "2",
        "height": "1",
        "name": "BK PID Error",
        "label": "Error",
        "format": "{{last_error | number:1}}°C",
        "layout": "col-center",
        "x": 370,
        "y": 380,
        "wires": []
    },
    {
        "id": "627032d8.938adc",
        "type": "ui_text",
        "z": "e23d6dbe.65bd1",
        "group": "6f2d723f.543a7c",
        "order": 9,
        "width": "2",
        "height": "1",
        "name": "BK PID Derivative",
        "label": "Derivative",
        "format": "{{derivative | number:1}}°C/s",
        "layout": "col-center",
        "x": 390,
        "y": 460,
        "wires": []
    },
    {
        "id": "ec8d386b.e7dee8",
        "type": "link in",
        "z": "e23d6dbe.65bd1",
        "name": "Boil PID display",
        "links": [
            "2d557121.1b7e5e",
            "b8303c9f.48fd7"
        ],
        "x": 195,
        "y": 420,
        "wires": [
            [
                "b29d9bb6.d486d8",
                "627032d8.938adc",
                "bb175004.338cb"
            ]
        ]
    },
    {
        "id": "ee39f01.2ec251",
        "type": "link in",
        "z": "6de3a69b.f14158",
        "name": "HLT bolt",
        "links": [
            "ff92318f.b68df",
            "a9831e4d.e641c"
        ],
        "x": 215,
        "y": 720,
        "wires": [
            [
                "ac16d69d.43eaa8"
            ]
        ]
    },
    {
        "id": "ac16d69d.43eaa8",
        "type": "change",
        "z": "6de3a69b.f14158",
        "name": "Bolt updates",
        "rules": [
            {
                "t": "set",
                "p": "hlt_lock",
                "pt": "msg",
                "to": "hlt_lock",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "hlt_on",
                "pt": "msg",
                "to": "hlt_on",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 720,
        "wires": [
            [
                "183f2376.7c384d"
            ]
        ]
    },
    {
        "id": "183f2376.7c384d",
        "type": "ui_template",
        "z": "6de3a69b.f14158",
        "group": "e314be26.7cdc7",
        "name": "HLT Bolt",
        "order": 1,
        "width": 3,
        "height": 2,
        "format": "<div>\n<ng-md-icon icon=\"{{(msg.mlt_lock || false) ? 'flash_off' : 'flash_on'}}\" size=100 style=\"{{(msg.hlt_on || false) ? 'fill: gold' : 'fill: grey'}}; margin-top:-34px\"></ng-md-icon>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 560,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "b4ab8e01.4f986",
        "type": "ui_ui_control",
        "z": "6de3a69b.f14158",
        "name": "Dashboard connection",
        "x": 140,
        "y": 620,
        "wires": [
            [
                "ac16d69d.43eaa8",
                "1bf99666.6de31a",
                "40b62f87.5127"
            ]
        ]
    },
    {
        "id": "9cb8d460.bba608",
        "type": "ui_template",
        "z": "6de3a69b.f14158",
        "group": "ef3bd2b4.11dc9",
        "name": "Centre group titles",
        "order": 17,
        "width": 0,
        "height": 0,
        "format": "<style>\n.nr-dashboard-theme ui-card-panel p.nr-dashboard-cardtitle {\n    text-align: center;\n}\n</style>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "global",
        "x": 130,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "f7ce09bf.c2c1d8",
        "type": "delay",
        "z": "2661457f.e66b3a",
        "name": "",
        "pauseType": "delay",
        "timeout": "500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 330,
        "y": 840,
        "wires": [
            [
                "b16857b4.8c1778"
            ]
        ]
    },
    {
        "id": "b16857b4.8c1778",
        "type": "link out",
        "z": "2661457f.e66b3a",
        "name": "PID trigger",
        "links": [],
        "x": 515,
        "y": 840,
        "wires": []
    },
    {
        "id": "156412a8.6f7b8d",
        "type": "inject",
        "z": "ce55a89f.3849c8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 90,
        "y": 120,
        "wires": [
            [
                "47b8141.eab11ec",
                "476808ad.a7bf78"
            ]
        ]
    },
    {
        "id": "47b8141.eab11ec",
        "type": "change",
        "z": "ce55a89f.3849c8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp_log",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "476808ad.a7bf78",
        "type": "ui_switch",
        "z": "ce55a89f.3849c8",
        "name": "",
        "label": "Temperature",
        "tooltip": "",
        "group": "e0b79df4.25a96",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 270,
        "y": 120,
        "wires": [
            [
                "47b8141.eab11ec"
            ]
        ]
    },
    {
        "id": "b8b5f1f7.93fd1",
        "type": "ui_button",
        "z": "6de3a69b.f14158",
        "name": "",
        "group": "9986f894.2e7808",
        "order": 1,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "BK PID",
        "tooltip": "",
        "color": "#757575",
        "bgcolor": "white",
        "icon": "",
        "payload": "4",
        "payloadType": "num",
        "topic": "",
        "x": 100,
        "y": 260,
        "wires": [
            [
                "28fc0f77.6321e"
            ]
        ]
    },
    {
        "id": "e7b19430.f073b8",
        "type": "ui_button",
        "z": "6de3a69b.f14158",
        "name": "",
        "group": "ba44c0e3.3df96",
        "order": 1,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Settings",
        "tooltip": "",
        "color": "#757575",
        "bgcolor": "white",
        "icon": "",
        "payload": "1",
        "payloadType": "num",
        "topic": "",
        "x": 100,
        "y": 340,
        "wires": [
            [
                "28fc0f77.6321e"
            ]
        ]
    },
    {
        "id": "3df52cc6.a4d844",
        "type": "ui_button",
        "z": "6de3a69b.f14158",
        "name": "",
        "group": "e0b79df4.25a96",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Back",
        "tooltip": "",
        "color": "#757575",
        "bgcolor": "#e0e0e0",
        "icon": "",
        "payload": "1",
        "payloadType": "num",
        "topic": "",
        "x": 90,
        "y": 300,
        "wires": [
            [
                "28fc0f77.6321e"
            ]
        ]
    },
    {
        "id": "f6b0f259.f19e1",
        "type": "ui_button",
        "z": "6de3a69b.f14158",
        "name": "",
        "group": "e0b79df4.25a96",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Back",
        "tooltip": "",
        "color": "#757575",
        "bgcolor": "#e0e0e0",
        "icon": "",
        "payload": "0",
        "payloadType": "num",
        "topic": "",
        "x": 90,
        "y": 380,
        "wires": [
            [
                "28fc0f77.6321e"
            ]
        ]
    },
    {
        "id": "9c3c64af.5782e8",
        "type": "inject",
        "z": "ce55a89f.3849c8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 90,
        "y": 360,
        "wires": [
            [
                "35c3b2bf.685e9e",
                "ea518287.71af4"
            ]
        ]
    },
    {
        "id": "35c3b2bf.685e9e",
        "type": "change",
        "z": "ce55a89f.3849c8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "pid_log",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "ea518287.71af4",
        "type": "ui_switch",
        "z": "ce55a89f.3849c8",
        "name": "",
        "label": "PID calculation",
        "tooltip": "",
        "group": "e0b79df4.25a96",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 280,
        "y": 360,
        "wires": [
            [
                "35c3b2bf.685e9e"
            ]
        ]
    },
    {
        "id": "fb420c49.a564f",
        "type": "ui_text",
        "z": "2661457f.e66b3a",
        "group": "6f2d723f.543a7c",
        "order": 1,
        "width": 2,
        "height": 1,
        "name": "HLT temperature display",
        "label": "Kettle",
        "format": "{{msg.payload | number:1}}°C",
        "layout": "col-center",
        "x": 610,
        "y": 100,
        "wires": []
    },
    {
        "id": "27b18a6e.1c6696",
        "type": "ui_text",
        "z": "87542114.410a9",
        "group": "6f2d723f.543a7c",
        "order": 2,
        "width": 2,
        "height": 1,
        "name": "Kettle target",
        "label": "Target",
        "format": "{{payload | number:1}}°C",
        "layout": "col-center",
        "x": 450,
        "y": 400,
        "wires": []
    },
    {
        "id": "47e13b2.1779ac4",
        "type": "inject",
        "z": "ce55a89f.3849c8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0.25",
        "payloadType": "num",
        "x": 90,
        "y": 200,
        "wires": [
            [
                "adb4f31d.49415",
                "f58c4cd7.0a255"
            ]
        ]
    },
    {
        "id": "adb4f31d.49415",
        "type": "change",
        "z": "ce55a89f.3849c8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp_log_delta",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "b363b235.9ea8f",
        "type": "change",
        "z": "87542114.410a9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp-BK",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "69f69eee.d9aa6",
        "type": "influxdb in",
        "z": "ce55a89f.3849c8",
        "influxdb": "a4679545.11e418",
        "name": "Find last logged temp in influxdb",
        "query": "",
        "rawOutput": false,
        "precision": "",
        "retentionPolicy": "",
        "x": 440,
        "y": 580,
        "wires": [
            [
                "e306a673.44c948"
            ]
        ]
    },
    {
        "id": "e306a673.44c948",
        "type": "function",
        "z": "ce55a89f.3849c8",
        "name": "Construct log entry",
        "func": "if(msg.payload.length === 0 || Math.abs(msg.payload[0].last - global.get(msg.topic)) >= global.get(\"temp_log_delta\")){\nmsg.payload = [\n    {\n        measurement: msg.topic,\n        fields: {\n            temperature: global.get(msg.topic),\n            brew: global.get(\"brew-label\")\n        },\n        timestamp: new Date()\n    }\n];\nreturn msg}else {\n    return null\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 430,
        "y": 620,
        "wires": [
            [
                "8e585786.b1d3b8"
            ]
        ]
    },
    {
        "id": "c53690e.39d637",
        "type": "function",
        "z": "ce55a89f.3849c8",
        "name": "Construct query to influxdb",
        "func": "msg.query = `SELECT last(value) FROM \"${msg.topic}\"`\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "x": 380,
        "y": 540,
        "wires": [
            [
                "69f69eee.d9aa6"
            ]
        ]
    },
    {
        "id": "75649334.ecf32c",
        "type": "switch",
        "z": "ce55a89f.3849c8",
        "name": "Temp logging on?",
        "property": "temp_log",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 310,
        "y": 500,
        "wires": [
            [
                "c53690e.39d637"
            ]
        ]
    },
    {
        "id": "7ff5440e.05101c",
        "type": "link in",
        "z": "ce55a89f.3849c8",
        "name": "",
        "links": [
            "33b1f220.5f8056",
            "fef78bfd.c46dc8",
            "86751c96.8bee98",
            "459c110c.d24b3",
            "db06208e.3d03a",
            "5d334d36.db79c4"
        ],
        "x": 175,
        "y": 500,
        "wires": [
            [
                "75649334.ecf32c"
            ]
        ]
    },
    {
        "id": "bbe8803.52f648",
        "type": "link in",
        "z": "ce55a89f.3849c8",
        "name": "BK PID logger",
        "links": [
            "2d557121.1b7e5e",
            "b8303c9f.48fd7"
        ],
        "x": 175,
        "y": 860,
        "wires": [
            [
                "4598e625.3dc578"
            ]
        ]
    },
    {
        "id": "96b235c6.5cd598",
        "type": "inject",
        "z": "ce55a89f.3849c8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 90,
        "y": 280,
        "wires": [
            [
                "3ca6f544.17654a",
                "a2552e10.e121f"
            ]
        ]
    },
    {
        "id": "3ca6f544.17654a",
        "type": "change",
        "z": "ce55a89f.3849c8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "output_log",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "a2552e10.e121f",
        "type": "ui_switch",
        "z": "ce55a89f.3849c8",
        "name": "",
        "label": "GPIO Output",
        "tooltip": "",
        "group": "e0b79df4.25a96",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "x": 270,
        "y": 280,
        "wires": [
            [
                "3ca6f544.17654a"
            ]
        ]
    },
    {
        "id": "f58c4cd7.0a255",
        "type": "ui_numeric",
        "z": "ce55a89f.3849c8",
        "name": "",
        "label": "Threshold",
        "tooltip": "",
        "group": "e0b79df4.25a96",
        "order": 3,
        "width": 0,
        "height": 0,
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value}}°C",
        "min": 0,
        "max": "2",
        "step": "0.05",
        "x": 260,
        "y": 200,
        "wires": [
            [
                "adb4f31d.49415"
            ]
        ]
    },
    {
        "id": "4598e625.3dc578",
        "type": "switch",
        "z": "ce55a89f.3849c8",
        "name": "PID logging on?",
        "property": "pid_log",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 300,
        "y": 860,
        "wires": [
            [
                "e422a535.7511c8"
            ]
        ]
    },
    {
        "id": "793ea392.db644c",
        "type": "influxdb batch",
        "z": "ce55a89f.3849c8",
        "influxdb": "a4679545.11e418",
        "precision": "",
        "retentionPolicy": "",
        "name": "",
        "x": 1240,
        "y": 880,
        "wires": []
    },
    {
        "id": "9af031ce.f83ec",
        "type": "function",
        "z": "ce55a89f.3849c8",
        "name": "Format output for influxdb",
        "func": "msg.payload = [\n    {\n        measurement: \"PID-boil-main-loop\",\n        fields: {\n            target: msg.target,\n            output: msg.output,\n            error: msg.last_error,\n            integrator: msg.integrator,\n            derivative: msg.derivative,\n            //active: global.get(\"bk_pid\"),\n            brew: global.get(\"brew-label\")\n        },\n        timestamp: new Date()\n    }\n];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 940,
        "y": 860,
        "wires": [
            [
                "793ea392.db644c"
            ]
        ]
    },
    {
        "id": "c4957e81.45763",
        "type": "influxdb batch",
        "z": "ce55a89f.3849c8",
        "influxdb": "a4679545.11e418",
        "precision": "",
        "retentionPolicy": "",
        "name": "",
        "x": 520,
        "y": 700,
        "wires": []
    },
    {
        "id": "433fce3b.721d1",
        "type": "link in",
        "z": "ce55a89f.3849c8",
        "name": "HLT GPIO logger",
        "links": [
            "43fbf6b6.fc6af8",
            "8c086fa3.531b7"
        ],
        "x": 175,
        "y": 900,
        "wires": [
            [
                "ce26be93.4a751"
            ]
        ]
    },
    {
        "id": "ce26be93.4a751",
        "type": "switch",
        "z": "ce55a89f.3849c8",
        "name": "Output logging on?",
        "property": "output_log",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 310,
        "y": 900,
        "wires": [
            [
                "a95ac22f.ba94"
            ]
        ]
    },
    {
        "id": "754f07f1.3714b8",
        "type": "function",
        "z": "ce55a89f.3849c8",
        "name": "Format output for influxdb",
        "func": "msg.payload = [\n    {\n        measurement: \"output-BK\",\n        fields: {\n            duty: msg.payload,\n            brew: global.get(\"brew-label\")\n        },\n        timestamp: new Date()\n    }\n];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 940,
        "y": 900,
        "wires": [
            [
                "793ea392.db644c"
            ]
        ]
    },
    {
        "id": "e6434aba.6f1998",
        "type": "ui_text_input",
        "z": "ce55a89f.3849c8",
        "name": "",
        "label": "Brew label",
        "tooltip": "",
        "group": "e0b79df4.25a96",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "",
        "x": 270,
        "y": 40,
        "wires": [
            [
                "5ac9cf32.3f8e"
            ]
        ]
    },
    {
        "id": "2447cf6f.734f6",
        "type": "inject",
        "z": "ce55a89f.3849c8",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "untitled",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "untitled",
        "payloadType": "str",
        "x": 100,
        "y": 40,
        "wires": [
            [
                "e6434aba.6f1998",
                "5ac9cf32.3f8e"
            ]
        ]
    },
    {
        "id": "5ac9cf32.3f8e",
        "type": "change",
        "z": "ce55a89f.3849c8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "brew-label",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "e422a535.7511c8",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 510,
        "y": 860,
        "wires": [
            [
                "92d8af6c.217a1"
            ]
        ]
    },
    {
        "id": "a95ac22f.ba94",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 510,
        "y": 900,
        "wires": [
            [
                "3ca23e41.08ef52"
            ]
        ]
    },
    {
        "id": "8e585786.b1d3b8",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "timed",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 480,
        "y": 660,
        "wires": [
            [
                "c4957e81.45763"
            ]
        ]
    },
    {
        "id": "92d8af6c.217a1",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "rate",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 700,
        "y": 860,
        "wires": [
            [
                "9af031ce.f83ec"
            ]
        ]
    },
    {
        "id": "3ca23e41.08ef52",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "rate",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 700,
        "y": 900,
        "wires": [
            [
                "754f07f1.3714b8"
            ]
        ]
    },
    {
        "id": "a574a616.774b68",
        "type": "ui_text",
        "z": "2661457f.e66b3a",
        "group": "9f772b70.e760a8",
        "order": 11,
        "width": 2,
        "height": 1,
        "name": "BK temperature display",
        "label": "Kettle",
        "format": "{{msg.payload | number:1}}°C",
        "layout": "col-center",
        "x": 470,
        "y": 520,
        "wires": []
    },
    {
        "id": "5c2b4d8c.9f06e4",
        "type": "smooth",
        "z": "2661457f.e66b3a",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "5",
        "round": "2",
        "mult": "single",
        "x": 380,
        "y": 480,
        "wires": [
            [
                "a574a616.774b68"
            ]
        ]
    },
    {
        "id": "9fbccece.26f7",
        "type": "sensor-ds18b20",
        "z": "2661457f.e66b3a",
        "name": "temp-BK",
        "sensorid": "28-031655d8feff",
        "timer": "2",
        "repeat": false,
        "x": 340,
        "y": 440,
        "wires": [
            [
                "5c2b4d8c.9f06e4",
                "459c110c.d24b3",
                "901a6a94.e59638"
            ]
        ]
    },
    {
        "id": "459c110c.d24b3",
        "type": "link out",
        "z": "2661457f.e66b3a",
        "name": "BK raw temperature",
        "links": [
            "7ff5440e.05101c",
            "3c82d582.229d9a"
        ],
        "x": 535,
        "y": 440,
        "wires": []
    },
    {
        "id": "901a6a94.e59638",
        "type": "ui_text",
        "z": "2661457f.e66b3a",
        "group": "6f2d723f.543a7c",
        "order": 1,
        "width": 2,
        "height": 1,
        "name": "BK temperature display",
        "label": "Kettle",
        "format": "{{msg.payload | number:1}}°C",
        "layout": "col-center",
        "x": 630,
        "y": 480,
        "wires": []
    },
    {
        "id": "d7ae6804.794488",
        "type": "ui_button",
        "z": "76f17c2e.6cd914",
        "name": "",
        "group": "e314be26.7cdc7",
        "order": 4,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Manual",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 220,
        "y": 80,
        "wires": [
            [
                "ee37ff7d.efca2"
            ]
        ]
    },
    {
        "id": "1401d2a8.57e5dd",
        "type": "ui_button",
        "z": "76f17c2e.6cd914",
        "name": "",
        "group": "e314be26.7cdc7",
        "order": 2,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "PID",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 210,
        "y": 40,
        "wires": [
            [
                "49adc6f8.8efd58"
            ]
        ]
    },
    {
        "id": "3a2db7f3.caab48",
        "type": "ui_button",
        "z": "76f17c2e.6cd914",
        "name": "",
        "group": "e314be26.7cdc7",
        "order": 7,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "false",
        "payloadType": "bool",
        "topic": "",
        "x": 210,
        "y": 120,
        "wires": [
            [
                "bb8c1e38.715c6"
            ]
        ]
    },
    {
        "id": "41efc8e0.458558",
        "type": "link in",
        "z": "76f17c2e.6cd914",
        "name": "PID button colour",
        "links": [
            "78e25fb7.121f2",
            "cd8fd53.01d4928"
        ],
        "x": 95,
        "y": 40,
        "wires": [
            [
                "1401d2a8.57e5dd"
            ]
        ]
    },
    {
        "id": "2b349aa2.c27c56",
        "type": "link in",
        "z": "76f17c2e.6cd914",
        "name": "Manual button colour",
        "links": [
            "4126258a.0c70cc"
        ],
        "x": 95,
        "y": 80,
        "wires": [
            [
                "d7ae6804.794488"
            ]
        ]
    },
    {
        "id": "197510e8.437adf",
        "type": "link in",
        "z": "76f17c2e.6cd914",
        "name": "Off button colour",
        "links": [
            "ae4cf0fc.1f703"
        ],
        "x": 95,
        "y": 120,
        "wires": [
            [
                "3a2db7f3.caab48"
            ]
        ]
    },
    {
        "id": "49adc6f8.8efd58",
        "type": "link out",
        "z": "76f17c2e.6cd914",
        "name": "PID button",
        "links": [
            "2b5d3a97.fe2e46",
            "171145e.e1279ba",
            "59ee5d3a.7b7e44",
            "94eaf8c0.d27d78"
        ],
        "x": 335,
        "y": 40,
        "wires": []
    },
    {
        "id": "ee37ff7d.efca2",
        "type": "link out",
        "z": "76f17c2e.6cd914",
        "name": "Manual button",
        "links": [
            "2b5d3a97.fe2e46",
            "171145e.e1279ba",
            "94eaf8c0.d27d78",
            "d9f3521b.e211",
            "41675f6f.fc2c8"
        ],
        "x": 335,
        "y": 80,
        "wires": []
    },
    {
        "id": "bb8c1e38.715c6",
        "type": "link out",
        "z": "76f17c2e.6cd914",
        "name": "Off button",
        "links": [
            "2b5d3a97.fe2e46",
            "952208a3.89f178",
            "8ff9873e.6884d8",
            "171145e.e1279ba",
            "94eaf8c0.d27d78",
            "c8f6e2a0.fc507"
        ],
        "x": 335,
        "y": 120,
        "wires": []
    },
    {
        "id": "182b909c.088abf",
        "type": "delay",
        "z": "76f17c2e.6cd914",
        "name": "delay",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 210,
        "y": 280,
        "wires": [
            [
                "bc1427e.41c4bd8"
            ]
        ]
    },
    {
        "id": "78e25fb7.121f2",
        "type": "link out",
        "z": "76f17c2e.6cd914",
        "name": "PID button colour",
        "links": [
            "41efc8e0.458558"
        ],
        "x": 655,
        "y": 300,
        "wires": []
    },
    {
        "id": "2b5d3a97.fe2e46",
        "type": "link in",
        "z": "76f17c2e.6cd914",
        "name": "Button click",
        "links": [
            "ee37ff7d.efca2",
            "bb8c1e38.715c6",
            "49adc6f8.8efd58",
            "11c18a22.2ff07e",
            "fd8c477a.99a1a"
        ],
        "x": 95,
        "y": 280,
        "wires": [
            [
                "182b909c.088abf"
            ]
        ]
    },
    {
        "id": "9ac05393.637e7",
        "type": "change",
        "z": "76f17c2e.6cd914",
        "name": "off colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 420,
        "wires": [
            [
                "4126258a.0c70cc"
            ]
        ]
    },
    {
        "id": "9293da46.8b4378",
        "type": "change",
        "z": "76f17c2e.6cd914",
        "name": "on colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "gold",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 380,
        "wires": [
            [
                "4126258a.0c70cc"
            ]
        ]
    },
    {
        "id": "162b743d.dbc84c",
        "type": "switch",
        "z": "76f17c2e.6cd914",
        "name": "",
        "property": "hlt_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 250,
        "y": 420,
        "wires": [
            [
                "9b2b6b14.fa3158"
            ],
            [
                "9ac05393.637e7"
            ]
        ]
    },
    {
        "id": "93abd82e.92bc38",
        "type": "delay",
        "z": "76f17c2e.6cd914",
        "name": "delay",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 210,
        "y": 380,
        "wires": [
            [
                "162b743d.dbc84c"
            ]
        ]
    },
    {
        "id": "4126258a.0c70cc",
        "type": "link out",
        "z": "76f17c2e.6cd914",
        "name": "Manual button colour",
        "links": [
            "2b349aa2.c27c56"
        ],
        "x": 655,
        "y": 400,
        "wires": []
    },
    {
        "id": "76f41349.7c1b5c",
        "type": "change",
        "z": "76f17c2e.6cd914",
        "name": "off colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "#424242",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 520,
        "wires": [
            [
                "ae4cf0fc.1f703"
            ]
        ]
    },
    {
        "id": "58792edf.fd8ea",
        "type": "change",
        "z": "76f17c2e.6cd914",
        "name": "on colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 480,
        "wires": [
            [
                "ae4cf0fc.1f703"
            ]
        ]
    },
    {
        "id": "6c877a84.a81904",
        "type": "switch",
        "z": "76f17c2e.6cd914",
        "name": "",
        "property": "hlt_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 390,
        "y": 500,
        "wires": [
            [
                "58792edf.fd8ea"
            ],
            [
                "76f41349.7c1b5c"
            ]
        ]
    },
    {
        "id": "bf2d3d17.e7b91",
        "type": "delay",
        "z": "76f17c2e.6cd914",
        "name": "delay",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 210,
        "y": 480,
        "wires": [
            [
                "6c877a84.a81904"
            ]
        ]
    },
    {
        "id": "ae4cf0fc.1f703",
        "type": "link out",
        "z": "76f17c2e.6cd914",
        "name": "Off button colour",
        "links": [
            "197510e8.437adf",
            "3e0efd1.4d98882",
            "c98ea849.baf91"
        ],
        "x": 655,
        "y": 500,
        "wires": []
    },
    {
        "id": "9b2b6b14.fa3158",
        "type": "switch",
        "z": "76f17c2e.6cd914",
        "name": "",
        "property": "hlt_pid",
        "propertyType": "global",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 390,
        "y": 400,
        "wires": [
            [
                "9293da46.8b4378"
            ],
            [
                "9ac05393.637e7"
            ]
        ]
    },
    {
        "id": "bc1427e.41c4bd8",
        "type": "switch",
        "z": "76f17c2e.6cd914",
        "name": "",
        "property": "hlt_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 250,
        "y": 320,
        "wires": [
            [
                "497a63b3.d68aec"
            ],
            [
                "f5a822cd.ff238"
            ]
        ]
    },
    {
        "id": "497a63b3.d68aec",
        "type": "switch",
        "z": "76f17c2e.6cd914",
        "name": "",
        "property": "hlt_pid",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 390,
        "y": 300,
        "wires": [
            [
                "da286d31.4cb2f"
            ],
            [
                "f5a822cd.ff238"
            ]
        ]
    },
    {
        "id": "da286d31.4cb2f",
        "type": "change",
        "z": "76f17c2e.6cd914",
        "name": "on colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "gold",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 280,
        "wires": [
            [
                "78e25fb7.121f2"
            ]
        ]
    },
    {
        "id": "f5a822cd.ff238",
        "type": "change",
        "z": "76f17c2e.6cd914",
        "name": "off colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 320,
        "wires": [
            [
                "78e25fb7.121f2"
            ]
        ]
    },
    {
        "id": "171145e.e1279ba",
        "type": "link in",
        "z": "76f17c2e.6cd914",
        "name": "Button click",
        "links": [
            "ee37ff7d.efca2",
            "bb8c1e38.715c6",
            "49adc6f8.8efd58",
            "11c18a22.2ff07e",
            "fd8c477a.99a1a"
        ],
        "x": 95,
        "y": 380,
        "wires": [
            [
                "93abd82e.92bc38"
            ]
        ]
    },
    {
        "id": "94eaf8c0.d27d78",
        "type": "link in",
        "z": "76f17c2e.6cd914",
        "name": "Button click",
        "links": [
            "ee37ff7d.efca2",
            "bb8c1e38.715c6",
            "49adc6f8.8efd58",
            "11c18a22.2ff07e",
            "fd8c477a.99a1a"
        ],
        "x": 95,
        "y": 480,
        "wires": [
            [
                "bf2d3d17.e7b91"
            ]
        ]
    },
    {
        "id": "bedb9c56.c198a",
        "type": "link in",
        "z": "76f17c2e.6cd914",
        "name": "Button initialization",
        "links": [
            "a902d194.51df48",
            "9719adc5.c3057"
        ],
        "x": 95,
        "y": 320,
        "wires": [
            [
                "bc1427e.41c4bd8"
            ]
        ]
    },
    {
        "id": "d3b244f.0770ab8",
        "type": "link in",
        "z": "76f17c2e.6cd914",
        "name": "Button initialization",
        "links": [
            "a902d194.51df48",
            "9719adc5.c3057"
        ],
        "x": 95,
        "y": 420,
        "wires": [
            [
                "162b743d.dbc84c"
            ]
        ]
    },
    {
        "id": "91805045.2fe3",
        "type": "link in",
        "z": "76f17c2e.6cd914",
        "name": "Button initialization",
        "links": [
            "a902d194.51df48",
            "9719adc5.c3057"
        ],
        "x": 95,
        "y": 520,
        "wires": [
            [
                "6c877a84.a81904"
            ]
        ]
    },
    {
        "id": "e434c8f1.3bb038",
        "type": "ui_ui_control",
        "z": "76f17c2e.6cd914",
        "name": "Dashboard connection",
        "x": 180,
        "y": 200,
        "wires": [
            [
                "9719adc5.c3057"
            ]
        ]
    },
    {
        "id": "9719adc5.c3057",
        "type": "link out",
        "z": "76f17c2e.6cd914",
        "name": "Button initialization on connection",
        "links": [
            "bedb9c56.c198a",
            "91805045.2fe3",
            "d3b244f.0770ab8"
        ],
        "x": 335,
        "y": 200,
        "wires": []
    },
    {
        "id": "81a3b5e5.9c2f08",
        "type": "inject",
        "z": "7ff47c5f.48e634",
        "name": "Default Element Duty",
        "props": [
            {
                "p": "payload",
                "v": "100",
                "vt": "num"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "100",
        "payloadType": "num",
        "x": 180,
        "y": 160,
        "wires": [
            [
                "745d3ae2.1a3874",
                "3b043bf6.091104",
                "5ead5e31.e2efd"
            ]
        ]
    },
    {
        "id": "3a5d145a.93b0ec",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "hlt_lock=true",
        "rules": [
            {
                "t": "set",
                "p": "hlt_lock",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 850,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "4cc4e3ef.277a5c",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "hlt_on = hlt_try",
        "rules": [
            {
                "t": "set",
                "p": "hlt_on",
                "pt": "global",
                "to": "hlt_try",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "hlt_try",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 1380,
        "wires": [
            [
                "6234b229.f8c8cc",
                "ff92318f.b68df"
            ]
        ]
    },
    {
        "id": "6234b229.f8c8cc",
        "type": "switch",
        "z": "7ff47c5f.48e634",
        "name": "hlt_on",
        "property": "hlt_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 1380,
        "wires": [
            [
                "3a5d145a.93b0ec"
            ],
            [
                "1e8e9861.df2ee8"
            ]
        ]
    },
    {
        "id": "1e8e9861.df2ee8",
        "type": "delay",
        "z": "7ff47c5f.48e634",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 860,
        "y": 1420,
        "wires": [
            [
                "91ca23db.4ea57"
            ]
        ]
    },
    {
        "id": "91ca23db.4ea57",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "hlt_lock = false",
        "rules": [
            {
                "t": "set",
                "p": "hlt_lock",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 1460,
        "wires": [
            [
                "a9831e4d.e641c"
            ]
        ]
    },
    {
        "id": "a9831e4d.e641c",
        "type": "link out",
        "z": "7ff47c5f.48e634",
        "name": "Bolt update",
        "links": [
            "93befc16.2ca578",
            "b05b4104.4b7748",
            "a0d524b2.529a4",
            "f8471ffc.3e73c",
            "ee39f01.2ec251"
        ],
        "x": 895,
        "y": 1500,
        "wires": []
    },
    {
        "id": "ff92318f.b68df",
        "type": "link out",
        "z": "7ff47c5f.48e634",
        "name": "Bolt update",
        "links": [
            "ee39f01.2ec251"
        ],
        "x": 675,
        "y": 1440,
        "wires": []
    },
    {
        "id": "ac7c0df5.2d95f",
        "type": "ui_numeric",
        "z": "7ff47c5f.48e634",
        "name": "",
        "label": "K𝗉",
        "tooltip": "",
        "group": "2b9485f6.57f89a",
        "order": 3,
        "width": "4",
        "height": "1",
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "99.8",
        "step": "0.2",
        "x": 170,
        "y": 480,
        "wires": [
            [
                "3e542086.ed1a6"
            ]
        ]
    },
    {
        "id": "3bf564d0.faed7c",
        "type": "ui_numeric",
        "z": "7ff47c5f.48e634",
        "name": "",
        "label": "K𝗂",
        "tooltip": "",
        "group": "2b9485f6.57f89a",
        "order": 5,
        "width": "4",
        "height": "1",
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "100",
        "step": "0.2",
        "x": 170,
        "y": 580,
        "wires": [
            [
                "5bb4c915.4bd698"
            ]
        ]
    },
    {
        "id": "46b4cda3.3529c4",
        "type": "ui_numeric",
        "z": "7ff47c5f.48e634",
        "name": "",
        "label": "K𝖽",
        "tooltip": "",
        "group": "2b9485f6.57f89a",
        "order": 7,
        "width": "4",
        "height": "1",
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "100",
        "step": "0.2",
        "x": 170,
        "y": 680,
        "wires": [
            [
                "46bf2ed8.811c3"
            ]
        ]
    },
    {
        "id": "3e542086.ed1a6",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "p",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "5bb4c915.4bd698",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "set flow.i",
        "rules": [
            {
                "t": "set",
                "p": "i",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "46bf2ed8.811c3",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "bfa7b145.99087",
        "type": "inject",
        "z": "7ff47c5f.48e634",
        "name": "Default P",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "55",
        "payloadType": "num",
        "x": 140,
        "y": 440,
        "wires": [
            [
                "ac7c0df5.2d95f",
                "3e542086.ed1a6"
            ]
        ]
    },
    {
        "id": "854decf9.24d1a",
        "type": "inject",
        "z": "7ff47c5f.48e634",
        "name": "Default I",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0.015",
        "payloadType": "num",
        "x": 140,
        "y": 540,
        "wires": [
            [
                "3bf564d0.faed7c",
                "5bb4c915.4bd698"
            ]
        ]
    },
    {
        "id": "5c7350cd.d5acf",
        "type": "inject",
        "z": "7ff47c5f.48e634",
        "name": "Default D",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "8",
        "payloadType": "num",
        "x": 140,
        "y": 640,
        "wires": [
            [
                "46b4cda3.3529c4",
                "46bf2ed8.811c3"
            ]
        ]
    },
    {
        "id": "c0024a32.b932c8",
        "type": "inject",
        "z": "7ff47c5f.48e634",
        "name": "Default HLT Target",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "65",
        "payloadType": "num",
        "x": 170,
        "y": 280,
        "wires": [
            [
                "32508953.66c1c6",
                "c43e7b1f.b12e98",
                "36cafb30.2ff094",
                "1dd4f739.f5dbf9"
            ]
        ]
    },
    {
        "id": "ed0aaae3.0af178",
        "type": "function",
        "z": "7ff47c5f.48e634",
        "name": "HLT PID",
        "func": "// Note that the algorithm provided below assumes a 1 second iteration time\n// Justin Angevaare\n// May 2018\n\n// Set temperature\nmsg.temperature =  msg.payload;\n\n// Well that node doesn't work... do manually\nmsg.interval = 2000\n\n// Calculate error\nmsg.error = flow.get('hlt_target') - msg.temperature;\n\n// Set output max\nmsg.max_output = 100\n        \n// Calculate integrator max\nmsg.integrator_max = msg.max_output/flow.get('i');\n\n// Update integrator\n// For purposes of integrator, bound error by [-1, 1]\nmsg.integrator = flow.get('integrator');\nmsg.integrator += (msg.interval/1000) * Math.max(Math.min(msg.error, 1), -1);\n\n// Bound total integrator by absolute maximum\nmsg.integrator = Math.max(Math.min(msg.integrator, msg.integrator_max), -msg.integrator_max);\n\n// Output updated integrator to flow context\nflow.set('integrator', msg.integrator);\n\n// Calculate proportional action\nmsg.output = msg.error * flow.get('p');\n\n// Calculate intergral action\nmsg.output += msg.integrator * flow.get('i');\n\n// Calculate derivative action\nmsg.derivative = (msg.error - flow.get('last_error'))/(msg.interval/1000);\nmsg.output += msg.derivative * flow.get('d');\n\n// Bound output by [0, max_output]\nmsg.output = Math.max(Math.min(msg.output, msg.max_output), 0);\n\n// Output updated last_error to flow context\nmsg.last_error = msg.error;\nflow.set('last_error', msg.last_error);\n\n// Set payload to element output\nmsg.payload = msg.output;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 500,
        "y": 60,
        "wires": [
            [
                "43fbf6b6.fc6af8",
                "76388d12.48d734"
            ]
        ]
    },
    {
        "id": "f575c45.affcf38",
        "type": "switch",
        "z": "7ff47c5f.48e634",
        "name": "hlt_pid switch",
        "property": "hlt_pid",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 320,
        "y": 80,
        "wires": [
            [
                "ed0aaae3.0af178"
            ],
            [
                "97615aea.e25968"
            ]
        ]
    },
    {
        "id": "97615aea.e25968",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "payload = hlt_manual_duty",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "hlt_manual_duty",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 100,
        "wires": [
            [
                "43fbf6b6.fc6af8"
            ]
        ]
    },
    {
        "id": "dce5b289.cb0a8",
        "type": "link in",
        "z": "7ff47c5f.48e634",
        "name": "HLT PID temperature input",
        "links": [
            "fef78bfd.c46dc8"
        ],
        "x": 75,
        "y": 60,
        "wires": [
            [
                "db58123d.b9b25",
                "83201082.864e7"
            ]
        ]
    },
    {
        "id": "c43e7b1f.b12e98",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "hlt_target",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "43fbf6b6.fc6af8",
        "type": "link out",
        "z": "7ff47c5f.48e634",
        "name": "PID or Manual Duty",
        "links": [
            "433fce3b.721d1",
            "23591173.103ece"
        ],
        "x": 735,
        "y": 60,
        "wires": []
    },
    {
        "id": "5e6963b3.faf26c",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "hlt_pid, hlt_try = true",
        "rules": [
            {
                "t": "set",
                "p": "hlt_pid",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "hlt_try",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 1000,
        "wires": [
            [
                "63b38899.66eb08"
            ]
        ]
    },
    {
        "id": "f8945fca.14f3c",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "hlt_pid = false, hlt_try = true",
        "rules": [
            {
                "t": "set",
                "p": "hlt_pid",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "hlt_try",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 1040,
        "wires": [
            [
                "df6cb64a.cd42e8"
            ]
        ]
    },
    {
        "id": "2aec349.a4aa1cc",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "hlt_pid, hlt_try = false",
        "rules": [
            {
                "t": "set",
                "p": "hlt_pid",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "hlt_try",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 960,
        "wires": [
            [
                "954a655e.9a1128"
            ]
        ]
    },
    {
        "id": "df6cb64a.cd42e8",
        "type": "link out",
        "z": "7ff47c5f.48e634",
        "name": "HLT Try Output",
        "links": [
            "1afe438f.5db26c"
        ],
        "x": 555,
        "y": 1040,
        "wires": []
    },
    {
        "id": "1afe438f.5db26c",
        "type": "link in",
        "z": "7ff47c5f.48e634",
        "name": "HLT Try Input",
        "links": [
            "954a655e.9a1128",
            "63b38899.66eb08",
            "df6cb64a.cd42e8"
        ],
        "x": 175,
        "y": 1380,
        "wires": [
            [
                "4cc4e3ef.277a5c"
            ]
        ]
    },
    {
        "id": "db58123d.b9b25",
        "type": "switch",
        "z": "7ff47c5f.48e634",
        "name": "hlt_on",
        "property": "hlt_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 170,
        "y": 80,
        "wires": [
            [
                "f575c45.affcf38"
            ]
        ]
    },
    {
        "id": "3b043bf6.091104",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "hlt_manual_duty",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "6663eb0d.1901d4",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "payload = 0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 1200,
        "wires": [
            [
                "8c086fa3.531b7"
            ]
        ]
    },
    {
        "id": "8c086fa3.531b7",
        "type": "link out",
        "z": "7ff47c5f.48e634",
        "name": "Off Duty",
        "links": [
            "433fce3b.721d1",
            "23591173.103ece"
        ],
        "x": 555,
        "y": 1200,
        "wires": []
    },
    {
        "id": "4ddb7150.13267",
        "type": "link out",
        "z": "7ff47c5f.48e634",
        "name": "Boil PID display",
        "links": [
            "5285e8f7.b9ad08",
            "eda67ad.0cd1d88",
            "c4fcdb7b.9d9928",
            "6442cfef.51015"
        ],
        "x": 555,
        "y": 1120,
        "wires": []
    },
    {
        "id": "b33c04e6.2bb9d8",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "Zero everything",
        "rules": [
            {
                "t": "set",
                "p": "last_error",
                "pt": "msg",
                "to": "0.0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "integrator",
                "pt": "msg",
                "to": "0.0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "derivative",
                "pt": "msg",
                "to": "0.0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "last_error",
                "pt": "flow",
                "to": "last_error",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "integrator",
                "pt": "flow",
                "to": "integrator",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "output",
                "pt": "msg",
                "to": "0.0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "target",
                "pt": "msg",
                "to": "hlt_target",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 1120,
        "wires": [
            [
                "4ddb7150.13267"
            ]
        ]
    },
    {
        "id": "76388d12.48d734",
        "type": "link out",
        "z": "7ff47c5f.48e634",
        "name": "Boil PID display",
        "links": [
            "5285e8f7.b9ad08",
            "eda67ad.0cd1d88",
            "c4fcdb7b.9d9928",
            "6442cfef.51015"
        ],
        "x": 615,
        "y": 20,
        "wires": []
    },
    {
        "id": "59ee5d3a.7b7e44",
        "type": "link in",
        "z": "7ff47c5f.48e634",
        "name": "PID button",
        "links": [
            "49adc6f8.8efd58"
        ],
        "x": 175,
        "y": 1000,
        "wires": [
            [
                "5e6963b3.faf26c"
            ]
        ]
    },
    {
        "id": "63b38899.66eb08",
        "type": "link out",
        "z": "7ff47c5f.48e634",
        "name": "HLT Try Output",
        "links": [
            "1afe438f.5db26c"
        ],
        "x": 555,
        "y": 1000,
        "wires": []
    },
    {
        "id": "954a655e.9a1128",
        "type": "link out",
        "z": "7ff47c5f.48e634",
        "name": "HLT Try Output",
        "links": [
            "1afe438f.5db26c"
        ],
        "x": 555,
        "y": 960,
        "wires": []
    },
    {
        "id": "41675f6f.fc2c8",
        "type": "link in",
        "z": "7ff47c5f.48e634",
        "name": "Manual button",
        "links": [
            "ee37ff7d.efca2"
        ],
        "x": 175,
        "y": 1040,
        "wires": [
            [
                "f8945fca.14f3c"
            ]
        ]
    },
    {
        "id": "d9f3521b.e211",
        "type": "link in",
        "z": "7ff47c5f.48e634",
        "name": "Manual button",
        "links": [
            "ee37ff7d.efca2"
        ],
        "x": 175,
        "y": 1080,
        "wires": [
            [
                "b33c04e6.2bb9d8"
            ]
        ]
    },
    {
        "id": "c8f6e2a0.fc507",
        "type": "link in",
        "z": "7ff47c5f.48e634",
        "name": "Off button",
        "links": [
            "bb8c1e38.715c6"
        ],
        "x": 175,
        "y": 960,
        "wires": [
            [
                "2aec349.a4aa1cc"
            ]
        ]
    },
    {
        "id": "8ff9873e.6884d8",
        "type": "link in",
        "z": "7ff47c5f.48e634",
        "name": "Off button",
        "links": [
            "bb8c1e38.715c6",
            "cb7e402a.4508d"
        ],
        "x": 175,
        "y": 1200,
        "wires": [
            [
                "6663eb0d.1901d4"
            ]
        ]
    },
    {
        "id": "4b546419.6aefdc",
        "type": "inject",
        "z": "7ff47c5f.48e634",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 740,
        "wires": [
            [
                "cb7e402a.4508d"
            ]
        ]
    },
    {
        "id": "952208a3.89f178",
        "type": "link in",
        "z": "7ff47c5f.48e634",
        "name": "Off button",
        "links": [
            "bb8c1e38.715c6",
            "cb7e402a.4508d"
        ],
        "x": 175,
        "y": 1120,
        "wires": [
            [
                "b33c04e6.2bb9d8"
            ]
        ]
    },
    {
        "id": "cb7e402a.4508d",
        "type": "link out",
        "z": "7ff47c5f.48e634",
        "name": "Off button - initialization",
        "links": [
            "8ff9873e.6884d8",
            "caf40a6.d99f1f8",
            "952208a3.89f178"
        ],
        "x": 315,
        "y": 740,
        "wires": []
    },
    {
        "id": "caf40a6.d99f1f8",
        "type": "link in",
        "z": "7ff47c5f.48e634",
        "name": "Off button - initialization",
        "links": [
            "cb7e402a.4508d"
        ],
        "x": 175,
        "y": 920,
        "wires": [
            [
                "add6b6d4.61d4a8"
            ]
        ]
    },
    {
        "id": "add6b6d4.61d4a8",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "hlt_lock, hlt_on, hlt_pid, hlt_try = false",
        "rules": [
            {
                "t": "set",
                "p": "hlt_lock",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "hlt_on",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "hlt_pid",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "hlt_try",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "36cafb30.2ff094",
        "type": "ui_text",
        "z": "7ff47c5f.48e634",
        "group": "e314be26.7cdc7",
        "order": 12,
        "width": 2,
        "height": 1,
        "name": "Kettle target",
        "label": "Target",
        "format": "{{payload | number:1}}°C",
        "layout": "col-center",
        "x": 470,
        "y": 340,
        "wires": []
    },
    {
        "id": "32508953.66c1c6",
        "type": "ui_slider",
        "z": "7ff47c5f.48e634",
        "name": "Kettle target slider",
        "label": "Target",
        "tooltip": "",
        "group": "e314be26.7cdc7",
        "order": 14,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "all",
        "topic": "",
        "min": "25",
        "max": "100",
        "step": "0.5",
        "x": 210,
        "y": 320,
        "wires": [
            [
                "c43e7b1f.b12e98",
                "36cafb30.2ff094",
                "1dd4f739.f5dbf9"
            ]
        ]
    },
    {
        "id": "745d3ae2.1a3874",
        "type": "ui_slider",
        "z": "7ff47c5f.48e634",
        "name": "Manual duty slider",
        "label": "Manual",
        "tooltip": "",
        "group": "e314be26.7cdc7",
        "order": 15,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "all",
        "topic": "",
        "min": "25",
        "max": "100",
        "step": "0.5",
        "x": 210,
        "y": 200,
        "wires": [
            [
                "3b043bf6.091104",
                "5ead5e31.e2efd"
            ]
        ]
    },
    {
        "id": "5ead5e31.e2efd",
        "type": "ui_text",
        "z": "7ff47c5f.48e634",
        "group": "e314be26.7cdc7",
        "order": 13,
        "width": 2,
        "height": 1,
        "name": "Manual duty",
        "label": "Manual",
        "format": "{{payload | number:0}}٪",
        "layout": "col-center",
        "x": 470,
        "y": 240,
        "wires": []
    },
    {
        "id": "dff031ea.20907",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "hlt_try",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "1dd4f739.f5dbf9",
        "type": "ui_text",
        "z": "7ff47c5f.48e634",
        "group": "2b9485f6.57f89a",
        "order": 1,
        "width": 2,
        "height": 1,
        "name": "Kettle target",
        "label": "Target",
        "format": "{{payload | number:1}}°C",
        "layout": "col-center",
        "x": 470,
        "y": 380,
        "wires": []
    },
    {
        "id": "83201082.864e7",
        "type": "change",
        "z": "7ff47c5f.48e634",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp-HLT",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 220,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "4940fdb0.1f6994",
        "type": "inject",
        "z": "46527686.8f8e78",
        "name": "Default Element Duty",
        "props": [
            {
                "p": "payload",
                "v": "100",
                "vt": "num"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "100",
        "payloadType": "num",
        "x": 180,
        "y": 180,
        "wires": [
            [
                "1c6e99ac.c77db6",
                "c8bbfe2d.9d7fb",
                "8511724a.5fd9a"
            ]
        ]
    },
    {
        "id": "fcfa366d.388288",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "mlt_lock=true",
        "rules": [
            {
                "t": "set",
                "p": "mlt_lock",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "d05234cc.00f998",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "mlt_on =mlt_try",
        "rules": [
            {
                "t": "set",
                "p": "mlt_on",
                "pt": "global",
                "to": "mlt_try",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "mlt_try",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 1400,
        "wires": [
            [
                "18ee7869.73ead8",
                "a271b65b.e0ce18"
            ]
        ]
    },
    {
        "id": "18ee7869.73ead8",
        "type": "switch",
        "z": "46527686.8f8e78",
        "name": "mlt_on",
        "property": "mlt_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 1400,
        "wires": [
            [
                "fcfa366d.388288"
            ],
            [
                "ff05906f.746b9"
            ]
        ]
    },
    {
        "id": "ff05906f.746b9",
        "type": "delay",
        "z": "46527686.8f8e78",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 860,
        "y": 1440,
        "wires": [
            [
                "a4bbce86.fbeec"
            ]
        ]
    },
    {
        "id": "a4bbce86.fbeec",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "mlt_lock = false",
        "rules": [
            {
                "t": "set",
                "p": "mlt_lock",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 1480,
        "wires": [
            [
                "2b0ba0e2.409c5"
            ]
        ]
    },
    {
        "id": "2b0ba0e2.409c5",
        "type": "link out",
        "z": "46527686.8f8e78",
        "name": "Bolt update",
        "links": [
            "b13a7a05.3c32a8"
        ],
        "x": 895,
        "y": 1520,
        "wires": []
    },
    {
        "id": "a271b65b.e0ce18",
        "type": "link out",
        "z": "46527686.8f8e78",
        "name": "Bolt update",
        "links": [
            "b13a7a05.3c32a8"
        ],
        "x": 675,
        "y": 1460,
        "wires": []
    },
    {
        "id": "18c86324.4b99ad",
        "type": "ui_numeric",
        "z": "46527686.8f8e78",
        "name": "",
        "label": "K𝗉",
        "tooltip": "",
        "group": "9ce4e30a.c71b1",
        "order": 4,
        "width": "4",
        "height": "1",
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "99.8",
        "step": "0.2",
        "x": 170,
        "y": 500,
        "wires": [
            [
                "e57cd415.c89758"
            ]
        ]
    },
    {
        "id": "aafe2220.e455e",
        "type": "ui_numeric",
        "z": "46527686.8f8e78",
        "name": "",
        "label": "K𝗂",
        "tooltip": "",
        "group": "9ce4e30a.c71b1",
        "order": 6,
        "width": "4",
        "height": "1",
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "100",
        "step": "0.2",
        "x": 170,
        "y": 600,
        "wires": [
            [
                "3df7793c.7ef656"
            ]
        ]
    },
    {
        "id": "45558bef.81d224",
        "type": "ui_numeric",
        "z": "46527686.8f8e78",
        "name": "",
        "label": "K𝖽",
        "tooltip": "",
        "group": "9ce4e30a.c71b1",
        "order": 8,
        "width": "4",
        "height": "1",
        "wrap": false,
        "passthru": true,
        "topic": "",
        "format": "{{value | number:1}}",
        "min": 0,
        "max": "100",
        "step": "0.2",
        "x": 170,
        "y": 700,
        "wires": [
            [
                "11adcb93.3a6814"
            ]
        ]
    },
    {
        "id": "e57cd415.c89758",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "p",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "3df7793c.7ef656",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "set flow.i",
        "rules": [
            {
                "t": "set",
                "p": "i",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "11adcb93.3a6814",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "d",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "c1c481db.7a863",
        "type": "inject",
        "z": "46527686.8f8e78",
        "name": "Default P",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "55",
        "payloadType": "num",
        "x": 140,
        "y": 460,
        "wires": [
            [
                "18c86324.4b99ad",
                "e57cd415.c89758"
            ]
        ]
    },
    {
        "id": "8f82cec0.48571",
        "type": "inject",
        "z": "46527686.8f8e78",
        "name": "Default I",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0.015",
        "payloadType": "num",
        "x": 140,
        "y": 560,
        "wires": [
            [
                "aafe2220.e455e",
                "3df7793c.7ef656"
            ]
        ]
    },
    {
        "id": "c49fe115.ee73",
        "type": "inject",
        "z": "46527686.8f8e78",
        "name": "Default D",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "8",
        "payloadType": "num",
        "x": 140,
        "y": 660,
        "wires": [
            [
                "45558bef.81d224",
                "11adcb93.3a6814"
            ]
        ]
    },
    {
        "id": "2987d6c6.0c31ca",
        "type": "inject",
        "z": "46527686.8f8e78",
        "name": "Default MLT Target",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "65",
        "payloadType": "num",
        "x": 170,
        "y": 300,
        "wires": [
            [
                "bd8dce9b.f5347",
                "4b486ac.bb6a194",
                "7412c5fe.d58c5c",
                "ab15c8de.d70468"
            ]
        ]
    },
    {
        "id": "2269bb9f.c18bd4",
        "type": "function",
        "z": "46527686.8f8e78",
        "name": "MLT PID",
        "func": "// Note that the algorithm provided below assumes a 1 second iteration time\n// Justin Angevaare\n// May 2018\n\n// Set temperature\nmsg.temperature =  msg.payload;\n\n// Well that node doesn't work... do manually\nmsg.interval = 2000\n\n// Calculate error\nmsg.error = flow.get('mlt_target') - msg.temperature;\n\n// Set output max\nmsg.max_output = 100\n        \n// Calculate integrator max\nmsg.integrator_max = msg.max_output/flow.get('i');\n\n// Update integrator\n// For purposes of integrator, bound error by [-1, 1]\nmsg.integrator = flow.get('integrator');\nmsg.integrator += (msg.interval/1000) * Math.max(Math.min(msg.error, 1), -1);\n\n// Bound total integrator by absolute maximum\nmsg.integrator = Math.max(Math.min(msg.integrator, msg.integrator_max), -msg.integrator_max);\n\n// Output updated integrator to flow context\nflow.set('integrator', msg.integrator);\n\n// Calculate proportional action\nmsg.output = msg.error * flow.get('p');\n\n// Calculate intergral action\nmsg.output += msg.integrator * flow.get('i');\n\n// Calculate derivative action\nmsg.derivative = (msg.error - flow.get('last_error'))/(msg.interval/1000);\nmsg.output += msg.derivative * flow.get('d');\n\n// Bound output by [0, max_output]\nmsg.output = Math.max(Math.min(msg.output, msg.max_output), 0);\n\n// Output updated last_error to flow context\nmsg.last_error = msg.error;\nflow.set('last_error', msg.last_error);\n\n// Set payload to element output\nmsg.payload = msg.output;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 500,
        "y": 80,
        "wires": [
            [
                "cb64fb4.6088108",
                "e7dd3df7.2106a"
            ]
        ]
    },
    {
        "id": "635990d2.0c975",
        "type": "switch",
        "z": "46527686.8f8e78",
        "name": "mlt_pid switch",
        "property": "mlt_pid",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 320,
        "y": 100,
        "wires": [
            [
                "2269bb9f.c18bd4"
            ],
            [
                "1ee008c0.8126d7"
            ]
        ]
    },
    {
        "id": "1ee008c0.8126d7",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "payload = mlt_manual_duty",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "mlt_manual_duty",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 120,
        "wires": [
            [
                "cb64fb4.6088108"
            ]
        ]
    },
    {
        "id": "d1b43cae.918ed",
        "type": "link in",
        "z": "46527686.8f8e78",
        "name": "BK PID temperature input",
        "links": [
            "db06208e.3d03a"
        ],
        "x": 75,
        "y": 80,
        "wires": [
            [
                "ea56eee9.49ce5",
                "39ae35a8.c30d5a"
            ]
        ]
    },
    {
        "id": "4b486ac.bb6a194",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "mlt_target",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "cb64fb4.6088108",
        "type": "link out",
        "z": "46527686.8f8e78",
        "name": "PID or Manual Duty",
        "links": [
            "a6bd74ad.129b18",
            "548fff53.8cbc7"
        ],
        "x": 735,
        "y": 80,
        "wires": []
    },
    {
        "id": "127e1235.e7403e",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "mlt_pid, mlt_try = true",
        "rules": [
            {
                "t": "set",
                "p": "mlt_pid",
                "pt": "global",
                "to": "true",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "mlt_try",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 1020,
        "wires": [
            [
                "3dde8242.e6069e"
            ]
        ]
    },
    {
        "id": "a6926971.0de4b8",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "mlt_pid = false, mlt_try = true",
        "rules": [
            {
                "t": "set",
                "p": "mlt_pid",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "mlt_try",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 1060,
        "wires": [
            [
                "aa92d104.1db46"
            ]
        ]
    },
    {
        "id": "8de48e72.837a4",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "mlt_pid, mlt_try = false",
        "rules": [
            {
                "t": "set",
                "p": "mlt_pid",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "mlt_try",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 980,
        "wires": [
            [
                "a993eadf.14fd28"
            ]
        ]
    },
    {
        "id": "aa92d104.1db46",
        "type": "link out",
        "z": "46527686.8f8e78",
        "name": "MLT Try Output",
        "links": [
            "345e6227.1bff1e"
        ],
        "x": 555,
        "y": 1060,
        "wires": []
    },
    {
        "id": "345e6227.1bff1e",
        "type": "link in",
        "z": "46527686.8f8e78",
        "name": "HLT Try Input",
        "links": [
            "a993eadf.14fd28",
            "3dde8242.e6069e",
            "aa92d104.1db46"
        ],
        "x": 175,
        "y": 1400,
        "wires": [
            [
                "d05234cc.00f998"
            ]
        ]
    },
    {
        "id": "ea56eee9.49ce5",
        "type": "switch",
        "z": "46527686.8f8e78",
        "name": "mlt_on",
        "property": "mlt_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 170,
        "y": 100,
        "wires": [
            [
                "635990d2.0c975"
            ]
        ]
    },
    {
        "id": "c8bbfe2d.9d7fb",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "mlt_manual_duty",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "a2509101.d8d07",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "payload = 0",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 1220,
        "wires": [
            [
                "c85e9945.a327c8"
            ]
        ]
    },
    {
        "id": "c85e9945.a327c8",
        "type": "link out",
        "z": "46527686.8f8e78",
        "name": "Off Duty",
        "links": [
            "a6bd74ad.129b18",
            "548fff53.8cbc7"
        ],
        "x": 555,
        "y": 1220,
        "wires": []
    },
    {
        "id": "bf0721aa.53329",
        "type": "link out",
        "z": "46527686.8f8e78",
        "name": "MLT PID display",
        "links": [
            "8de04f25.80f68",
            "c9c2fcce.abe6b"
        ],
        "x": 555,
        "y": 1140,
        "wires": []
    },
    {
        "id": "a35e63a8.6c632",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "Zero everything",
        "rules": [
            {
                "t": "set",
                "p": "last_error",
                "pt": "msg",
                "to": "0.0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "integrator",
                "pt": "msg",
                "to": "0.0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "derivative",
                "pt": "msg",
                "to": "0.0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "last_error",
                "pt": "flow",
                "to": "last_error",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "integrator",
                "pt": "flow",
                "to": "integrator",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "output",
                "pt": "msg",
                "to": "0.0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "target",
                "pt": "msg",
                "to": "mlt_target",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 1140,
        "wires": [
            [
                "bf0721aa.53329"
            ]
        ]
    },
    {
        "id": "e7dd3df7.2106a",
        "type": "link out",
        "z": "46527686.8f8e78",
        "name": "Boil PID display",
        "links": [
            "5285e8f7.b9ad08",
            "eda67ad.0cd1d88",
            "8de04f25.80f68",
            "c9c2fcce.abe6b"
        ],
        "x": 615,
        "y": 40,
        "wires": []
    },
    {
        "id": "fb12437f.276c7",
        "type": "link in",
        "z": "46527686.8f8e78",
        "name": "PID button",
        "links": [
            "6c29da1c.1c4a34"
        ],
        "x": 175,
        "y": 1020,
        "wires": [
            [
                "127e1235.e7403e"
            ]
        ]
    },
    {
        "id": "3dde8242.e6069e",
        "type": "link out",
        "z": "46527686.8f8e78",
        "name": "MLT Try Output",
        "links": [
            "345e6227.1bff1e"
        ],
        "x": 555,
        "y": 1020,
        "wires": []
    },
    {
        "id": "a993eadf.14fd28",
        "type": "link out",
        "z": "46527686.8f8e78",
        "name": "MLT Try Output",
        "links": [
            "345e6227.1bff1e"
        ],
        "x": 555,
        "y": 980,
        "wires": []
    },
    {
        "id": "707c41c8.f24a7",
        "type": "link in",
        "z": "46527686.8f8e78",
        "name": "Manual button",
        "links": [
            "bfe25112.8ec7f"
        ],
        "x": 175,
        "y": 1060,
        "wires": [
            [
                "a6926971.0de4b8"
            ]
        ]
    },
    {
        "id": "76a75b5f.1a91e4",
        "type": "link in",
        "z": "46527686.8f8e78",
        "name": "Manual button",
        "links": [
            "bfe25112.8ec7f"
        ],
        "x": 175,
        "y": 1100,
        "wires": [
            [
                "a35e63a8.6c632"
            ]
        ]
    },
    {
        "id": "675ff4c3.a27a4c",
        "type": "link in",
        "z": "46527686.8f8e78",
        "name": "Off button",
        "links": [
            "4d6c773e.01bf78"
        ],
        "x": 175,
        "y": 980,
        "wires": [
            [
                "8de48e72.837a4"
            ]
        ]
    },
    {
        "id": "21657662.1a3cba",
        "type": "link in",
        "z": "46527686.8f8e78",
        "name": "Off button",
        "links": [
            "4d6c773e.01bf78",
            "b10189bb.892a68"
        ],
        "x": 175,
        "y": 1220,
        "wires": [
            [
                "a2509101.d8d07"
            ]
        ]
    },
    {
        "id": "2b71e8a.18c7518",
        "type": "inject",
        "z": "46527686.8f8e78",
        "name": "",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 760,
        "wires": [
            [
                "b10189bb.892a68"
            ]
        ]
    },
    {
        "id": "6e2bb49c.856f7c",
        "type": "link in",
        "z": "46527686.8f8e78",
        "name": "Off button",
        "links": [
            "4d6c773e.01bf78",
            "b10189bb.892a68"
        ],
        "x": 175,
        "y": 1140,
        "wires": [
            [
                "a35e63a8.6c632"
            ]
        ]
    },
    {
        "id": "b10189bb.892a68",
        "type": "link out",
        "z": "46527686.8f8e78",
        "name": "Off button - initialization",
        "links": [
            "21657662.1a3cba",
            "6e2bb49c.856f7c",
            "f705da1.a4ae128"
        ],
        "x": 315,
        "y": 760,
        "wires": []
    },
    {
        "id": "f705da1.a4ae128",
        "type": "link in",
        "z": "46527686.8f8e78",
        "name": "Off button - initialization",
        "links": [
            "b10189bb.892a68"
        ],
        "x": 175,
        "y": 940,
        "wires": [
            [
                "84461274.eaec9"
            ]
        ]
    },
    {
        "id": "84461274.eaec9",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "mlt_lock, mlt_on, mlt_pid, mlt_try = false",
        "rules": [
            {
                "t": "set",
                "p": "mlt_lock",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "mlt_on",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "mlt_pid",
                "pt": "global",
                "to": "false",
                "tot": "bool"
            },
            {
                "t": "set",
                "p": "mlt_try",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "7412c5fe.d58c5c",
        "type": "ui_text",
        "z": "46527686.8f8e78",
        "group": "ef3bd2b4.11dc9",
        "order": 12,
        "width": 2,
        "height": 1,
        "name": "Kettle target",
        "label": "Target",
        "format": "{{payload | number:1}}°C",
        "layout": "col-center",
        "x": 470,
        "y": 360,
        "wires": []
    },
    {
        "id": "bd8dce9b.f5347",
        "type": "ui_slider",
        "z": "46527686.8f8e78",
        "name": "Kettle target slider",
        "label": "Target",
        "tooltip": "",
        "group": "ef3bd2b4.11dc9",
        "order": 14,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "all",
        "topic": "",
        "min": "25",
        "max": "100",
        "step": "0.5",
        "x": 210,
        "y": 340,
        "wires": [
            [
                "4b486ac.bb6a194",
                "7412c5fe.d58c5c",
                "ab15c8de.d70468"
            ]
        ]
    },
    {
        "id": "1c6e99ac.c77db6",
        "type": "ui_slider",
        "z": "46527686.8f8e78",
        "name": "Manual duty slider",
        "label": "Manual",
        "tooltip": "",
        "group": "ef3bd2b4.11dc9",
        "order": 15,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "all",
        "topic": "",
        "min": "25",
        "max": "100",
        "step": "0.5",
        "x": 210,
        "y": 220,
        "wires": [
            [
                "c8bbfe2d.9d7fb",
                "8511724a.5fd9a"
            ]
        ]
    },
    {
        "id": "8511724a.5fd9a",
        "type": "ui_text",
        "z": "46527686.8f8e78",
        "group": "ef3bd2b4.11dc9",
        "order": 13,
        "width": 2,
        "height": 1,
        "name": "Manual duty",
        "label": "Manual",
        "format": "{{payload | number:0}}٪",
        "layout": "col-center",
        "x": 470,
        "y": 260,
        "wires": []
    },
    {
        "id": "4145d5b1.339fbc",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "mlt_try",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "ab15c8de.d70468",
        "type": "ui_text",
        "z": "46527686.8f8e78",
        "group": "9ce4e30a.c71b1",
        "order": 2,
        "width": 2,
        "height": 1,
        "name": "Kettle target",
        "label": "Target",
        "format": "{{payload | number:1}}°C",
        "layout": "col-center",
        "x": 470,
        "y": 400,
        "wires": []
    },
    {
        "id": "39ae35a8.c30d5a",
        "type": "change",
        "z": "46527686.8f8e78",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "temp-MLT",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 220,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "ef29a8fb.350ff8",
        "type": "ui_button",
        "z": "7b4cf8e5.18ab18",
        "name": "",
        "group": "ef3bd2b4.11dc9",
        "order": 4,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Manual",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 220,
        "y": 80,
        "wires": [
            [
                "bfe25112.8ec7f"
            ]
        ]
    },
    {
        "id": "5b760b1c.888464",
        "type": "ui_button",
        "z": "7b4cf8e5.18ab18",
        "name": "",
        "group": "ef3bd2b4.11dc9",
        "order": 2,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "PID",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 210,
        "y": 40,
        "wires": [
            [
                "6c29da1c.1c4a34"
            ]
        ]
    },
    {
        "id": "22b7af2e.adf63",
        "type": "ui_button",
        "z": "7b4cf8e5.18ab18",
        "name": "",
        "group": "ef3bd2b4.11dc9",
        "order": 7,
        "width": 2,
        "height": 1,
        "passthru": false,
        "label": "Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "false",
        "payloadType": "bool",
        "topic": "",
        "x": 210,
        "y": 120,
        "wires": [
            [
                "4d6c773e.01bf78"
            ]
        ]
    },
    {
        "id": "cbf1b164.9461c",
        "type": "link in",
        "z": "7b4cf8e5.18ab18",
        "name": "PID button colour",
        "links": [
            "c8dc8d75.563d5",
            "cd8fd53.01d4928"
        ],
        "x": 95,
        "y": 40,
        "wires": [
            [
                "5b760b1c.888464"
            ]
        ]
    },
    {
        "id": "3b0115a5.53fdda",
        "type": "link in",
        "z": "7b4cf8e5.18ab18",
        "name": "Manual button colour",
        "links": [
            "34baecb7.4c3e34"
        ],
        "x": 95,
        "y": 80,
        "wires": [
            [
                "ef29a8fb.350ff8"
            ]
        ]
    },
    {
        "id": "5aecc554.dd46fc",
        "type": "link in",
        "z": "7b4cf8e5.18ab18",
        "name": "Off button colour",
        "links": [
            "420bf10d.342d8"
        ],
        "x": 95,
        "y": 120,
        "wires": [
            [
                "22b7af2e.adf63"
            ]
        ]
    },
    {
        "id": "6c29da1c.1c4a34",
        "type": "link out",
        "z": "7b4cf8e5.18ab18",
        "name": "PID button",
        "links": [
            "b540053d.ed1818",
            "a70f7887.78fd08",
            "fb12437f.276c7",
            "e1dbff4.edeff"
        ],
        "x": 335,
        "y": 40,
        "wires": []
    },
    {
        "id": "bfe25112.8ec7f",
        "type": "link out",
        "z": "7b4cf8e5.18ab18",
        "name": "Manual button",
        "links": [
            "76a75b5f.1a91e4",
            "707c41c8.f24a7",
            "b540053d.ed1818",
            "a70f7887.78fd08",
            "e1dbff4.edeff"
        ],
        "x": 335,
        "y": 80,
        "wires": []
    },
    {
        "id": "4d6c773e.01bf78",
        "type": "link out",
        "z": "7b4cf8e5.18ab18",
        "name": "Off button",
        "links": [
            "b540053d.ed1818",
            "a70f7887.78fd08",
            "675ff4c3.a27a4c",
            "21657662.1a3cba",
            "6e2bb49c.856f7c",
            "e1dbff4.edeff"
        ],
        "x": 335,
        "y": 120,
        "wires": []
    },
    {
        "id": "3f3f4f9c.22e27",
        "type": "delay",
        "z": "7b4cf8e5.18ab18",
        "name": "delay",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 210,
        "y": 280,
        "wires": [
            [
                "2ac8a670.c94b3a"
            ]
        ]
    },
    {
        "id": "c8dc8d75.563d5",
        "type": "link out",
        "z": "7b4cf8e5.18ab18",
        "name": "PID button colour",
        "links": [
            "cbf1b164.9461c"
        ],
        "x": 655,
        "y": 300,
        "wires": []
    },
    {
        "id": "e1dbff4.edeff",
        "type": "link in",
        "z": "7b4cf8e5.18ab18",
        "name": "Button click",
        "links": [
            "4d6c773e.01bf78",
            "6c29da1c.1c4a34",
            "bfe25112.8ec7f"
        ],
        "x": 95,
        "y": 280,
        "wires": [
            [
                "3f3f4f9c.22e27"
            ]
        ]
    },
    {
        "id": "67021544.1f872c",
        "type": "change",
        "z": "7b4cf8e5.18ab18",
        "name": "off colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 420,
        "wires": [
            [
                "34baecb7.4c3e34"
            ]
        ]
    },
    {
        "id": "dcaf576b.84e338",
        "type": "change",
        "z": "7b4cf8e5.18ab18",
        "name": "on colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "gold",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 380,
        "wires": [
            [
                "34baecb7.4c3e34"
            ]
        ]
    },
    {
        "id": "f4708a9f.c6ba18",
        "type": "switch",
        "z": "7b4cf8e5.18ab18",
        "name": "",
        "property": "mlt_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 250,
        "y": 420,
        "wires": [
            [
                "5f39501b.18798"
            ],
            [
                "67021544.1f872c"
            ]
        ]
    },
    {
        "id": "9b8a2d67.103f5",
        "type": "delay",
        "z": "7b4cf8e5.18ab18",
        "name": "delay",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 210,
        "y": 380,
        "wires": [
            [
                "f4708a9f.c6ba18"
            ]
        ]
    },
    {
        "id": "34baecb7.4c3e34",
        "type": "link out",
        "z": "7b4cf8e5.18ab18",
        "name": "Manual button colour",
        "links": [
            "3b0115a5.53fdda"
        ],
        "x": 635,
        "y": 400,
        "wires": []
    },
    {
        "id": "c57342d4.c235e",
        "type": "change",
        "z": "7b4cf8e5.18ab18",
        "name": "off colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "#424242",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 520,
        "wires": [
            [
                "420bf10d.342d8"
            ]
        ]
    },
    {
        "id": "73bb7b05.719fe4",
        "type": "change",
        "z": "7b4cf8e5.18ab18",
        "name": "on colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 480,
        "wires": [
            [
                "420bf10d.342d8"
            ]
        ]
    },
    {
        "id": "d439dec6.0f3ef",
        "type": "switch",
        "z": "7b4cf8e5.18ab18",
        "name": "",
        "property": "mlt_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 480,
        "wires": [
            [
                "73bb7b05.719fe4"
            ],
            [
                "c57342d4.c235e"
            ]
        ]
    },
    {
        "id": "10095170.07455f",
        "type": "delay",
        "z": "7b4cf8e5.18ab18",
        "name": "delay",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 210,
        "y": 480,
        "wires": [
            [
                "d439dec6.0f3ef"
            ]
        ]
    },
    {
        "id": "420bf10d.342d8",
        "type": "link out",
        "z": "7b4cf8e5.18ab18",
        "name": "Off button colour",
        "links": [
            "5aecc554.dd46fc"
        ],
        "x": 635,
        "y": 500,
        "wires": []
    },
    {
        "id": "5f39501b.18798",
        "type": "switch",
        "z": "7b4cf8e5.18ab18",
        "name": "",
        "property": "mlt_pid",
        "propertyType": "global",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 370,
        "y": 400,
        "wires": [
            [
                "dcaf576b.84e338"
            ],
            [
                "67021544.1f872c"
            ]
        ]
    },
    {
        "id": "2ac8a670.c94b3a",
        "type": "switch",
        "z": "7b4cf8e5.18ab18",
        "name": "",
        "property": "mlt_on",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 250,
        "y": 320,
        "wires": [
            [
                "e5c26920.8188d8"
            ],
            [
                "51df099d.545508"
            ]
        ]
    },
    {
        "id": "e5c26920.8188d8",
        "type": "switch",
        "z": "7b4cf8e5.18ab18",
        "name": "",
        "property": "mlt_pid",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 390,
        "y": 300,
        "wires": [
            [
                "7a4e356b.0eecfc"
            ],
            [
                "51df099d.545508"
            ]
        ]
    },
    {
        "id": "7a4e356b.0eecfc",
        "type": "change",
        "z": "7b4cf8e5.18ab18",
        "name": "on colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "gold",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 280,
        "wires": [
            [
                "c8dc8d75.563d5"
            ]
        ]
    },
    {
        "id": "51df099d.545508",
        "type": "change",
        "z": "7b4cf8e5.18ab18",
        "name": "off colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 320,
        "wires": [
            [
                "c8dc8d75.563d5"
            ]
        ]
    },
    {
        "id": "b540053d.ed1818",
        "type": "link in",
        "z": "7b4cf8e5.18ab18",
        "name": "Button click",
        "links": [
            "bfe25112.8ec7f",
            "4d6c773e.01bf78",
            "6c29da1c.1c4a34",
            "11c18a22.2ff07e",
            "fd8c477a.99a1a"
        ],
        "x": 95,
        "y": 380,
        "wires": [
            [
                "9b8a2d67.103f5"
            ]
        ]
    },
    {
        "id": "a70f7887.78fd08",
        "type": "link in",
        "z": "7b4cf8e5.18ab18",
        "name": "Button click",
        "links": [
            "bfe25112.8ec7f",
            "4d6c773e.01bf78",
            "6c29da1c.1c4a34",
            "11c18a22.2ff07e",
            "fd8c477a.99a1a"
        ],
        "x": 95,
        "y": 480,
        "wires": [
            [
                "10095170.07455f"
            ]
        ]
    },
    {
        "id": "76e81cc9.d7e8d4",
        "type": "link in",
        "z": "7b4cf8e5.18ab18",
        "name": "Button initialization",
        "links": [
            "b20ee916.ed1088"
        ],
        "x": 95,
        "y": 320,
        "wires": [
            [
                "2ac8a670.c94b3a"
            ]
        ]
    },
    {
        "id": "1387908.5956b7",
        "type": "link in",
        "z": "7b4cf8e5.18ab18",
        "name": "Button initialization",
        "links": [
            "a902d194.51df48",
            "b20ee916.ed1088"
        ],
        "x": 95,
        "y": 420,
        "wires": [
            [
                "f4708a9f.c6ba18"
            ]
        ]
    },
    {
        "id": "b3b1b65c.351aa8",
        "type": "link in",
        "z": "7b4cf8e5.18ab18",
        "name": "Button initialization",
        "links": [
            "a902d194.51df48",
            "b20ee916.ed1088"
        ],
        "x": 95,
        "y": 520,
        "wires": [
            [
                "d439dec6.0f3ef"
            ]
        ]
    },
    {
        "id": "8af0cc71.67c3b",
        "type": "ui_ui_control",
        "z": "7b4cf8e5.18ab18",
        "name": "Dashboard connection",
        "x": 180,
        "y": 200,
        "wires": [
            [
                "b20ee916.ed1088"
            ]
        ]
    },
    {
        "id": "b20ee916.ed1088",
        "type": "link out",
        "z": "7b4cf8e5.18ab18",
        "name": "Button initialization on connection",
        "links": [
            "76e81cc9.d7e8d4",
            "b3b1b65c.351aa8",
            "1387908.5956b7"
        ],
        "x": 335,
        "y": 200,
        "wires": []
    },
    {
        "id": "70c93c90.fd4204",
        "type": "ui_text",
        "z": "e23d6dbe.65bd1",
        "group": "9ce4e30a.c71b1",
        "order": 7,
        "width": "2",
        "height": "1",
        "name": "MLT PID Integrator",
        "label": "Integral",
        "format": "{{integrator | number:1}}°C⦁s",
        "layout": "col-center",
        "x": 390,
        "y": 260,
        "wires": []
    },
    {
        "id": "59626737.f24528",
        "type": "ui_text",
        "z": "e23d6dbe.65bd1",
        "group": "9ce4e30a.c71b1",
        "order": 5,
        "width": "2",
        "height": "1",
        "name": "MLT PID Error",
        "label": "Error",
        "format": "{{last_error | number:1}}°C",
        "layout": "col-center",
        "x": 380,
        "y": 220,
        "wires": []
    },
    {
        "id": "46054ce0.160224",
        "type": "ui_text",
        "z": "e23d6dbe.65bd1",
        "group": "9ce4e30a.c71b1",
        "order": 9,
        "width": "2",
        "height": "1",
        "name": "MLT PID Derivative",
        "label": "Derivative",
        "format": "{{derivative | number:1}}°C/s",
        "layout": "col-center",
        "x": 390,
        "y": 300,
        "wires": []
    },
    {
        "id": "8de04f25.80f68",
        "type": "link in",
        "z": "e23d6dbe.65bd1",
        "name": "MLT PID display",
        "links": [
            "e7dd3df7.2106a",
            "bf0721aa.53329"
        ],
        "x": 195,
        "y": 260,
        "wires": [
            [
                "70c93c90.fd4204",
                "46054ce0.160224",
                "59626737.f24528"
            ]
        ]
    },
    {
        "id": "3505cdfe.8c51d2",
        "type": "ui_text",
        "z": "e23d6dbe.65bd1",
        "group": "2b9485f6.57f89a",
        "order": 6,
        "width": "2",
        "height": "1",
        "name": "HLT PID Integrator",
        "label": "Integral",
        "format": "{{integrator | number:1}}°C⦁s",
        "layout": "col-center",
        "x": 390,
        "y": 100,
        "wires": []
    },
    {
        "id": "84144e7a.5f0d6",
        "type": "ui_text",
        "z": "e23d6dbe.65bd1",
        "group": "2b9485f6.57f89a",
        "order": 4,
        "width": "2",
        "height": "1",
        "name": "HLT PID Error",
        "label": "Error",
        "format": "{{last_error | number:1}}°C",
        "layout": "col-center",
        "x": 380,
        "y": 60,
        "wires": []
    },
    {
        "id": "fd59e298.93198",
        "type": "ui_text",
        "z": "e23d6dbe.65bd1",
        "group": "2b9485f6.57f89a",
        "order": 8,
        "width": "2",
        "height": "1",
        "name": "HLT PID Derivative",
        "label": "Derivative",
        "format": "{{derivative | number:1}}°C/s",
        "layout": "col-center",
        "x": 390,
        "y": 140,
        "wires": []
    },
    {
        "id": "c4fcdb7b.9d9928",
        "type": "link in",
        "z": "e23d6dbe.65bd1",
        "name": "HLT PID display",
        "links": [
            "4ddb7150.13267",
            "76388d12.48d734"
        ],
        "x": 195,
        "y": 100,
        "wires": [
            [
                "3505cdfe.8c51d2",
                "fd59e298.93198",
                "84144e7a.5f0d6"
            ]
        ]
    },
    {
        "id": "5ebc4cce.d41744",
        "type": "rpi-gpio out",
        "z": "cc79254f.7430d8",
        "name": "HLT GPIO",
        "pin": "36",
        "set": false,
        "level": "0",
        "freq": "1",
        "out": "pwm",
        "x": 300,
        "y": 40,
        "wires": []
    },
    {
        "id": "23591173.103ece",
        "type": "link in",
        "z": "cc79254f.7430d8",
        "name": "HLT GPIO",
        "links": [
            "43fbf6b6.fc6af8",
            "8c086fa3.531b7"
        ],
        "x": 175,
        "y": 60,
        "wires": [
            [
                "5ebc4cce.d41744",
                "1a4772d0.29db9d",
                "f794db8b.5dd808"
            ]
        ]
    },
    {
        "id": "1a4772d0.29db9d",
        "type": "range",
        "z": "cc79254f.7430d8",
        "minin": "0",
        "maxin": "100",
        "minout": "0",
        "maxout": "5.5",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "Duty to watts",
        "x": 310,
        "y": 80,
        "wires": [
            [
                "28790623.a6791a"
            ]
        ]
    },
    {
        "id": "28790623.a6791a",
        "type": "ui_text",
        "z": "cc79254f.7430d8",
        "group": "e314be26.7cdc7",
        "order": 6,
        "width": 3,
        "height": 1,
        "name": "Element output",
        "label": " ",
        "format": "{{payload | number:2}} kw",
        "layout": "row-left",
        "x": 360,
        "y": 120,
        "wires": []
    },
    {
        "id": "f794db8b.5dd808",
        "type": "ui_text",
        "z": "cc79254f.7430d8",
        "group": "2b9485f6.57f89a",
        "order": 2,
        "width": "2",
        "height": "1",
        "name": "HLT Element duty",
        "label": "Output",
        "format": "{{payload | number:0}}﹪",
        "layout": "col-center",
        "x": 370,
        "y": 160,
        "wires": []
    },
    {
        "id": "b0083ee0.1b113",
        "type": "rpi-gpio out",
        "z": "cc79254f.7430d8",
        "name": "BK1 GPIO",
        "pin": "32",
        "set": false,
        "level": "0",
        "freq": "1",
        "out": "pwm",
        "x": 310,
        "y": 440,
        "wires": []
    },
    {
        "id": "49b6161d.0beb38",
        "type": "link in",
        "z": "cc79254f.7430d8",
        "name": "BK GPIO",
        "links": [
            "3352c817.f10c48",
            "66f7a048.da787"
        ],
        "x": 175,
        "y": 460,
        "wires": [
            [
                "b0083ee0.1b113",
                "4fd3c96d.8b66f8",
                "93411b64.c6bbc8"
            ]
        ]
    },
    {
        "id": "4fd3c96d.8b66f8",
        "type": "range",
        "z": "cc79254f.7430d8",
        "minin": "0",
        "maxin": "100",
        "minout": "0",
        "maxout": "5.5",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "Duty to watts",
        "x": 310,
        "y": 480,
        "wires": [
            [
                "6ebe3cd2.4902c4"
            ]
        ]
    },
    {
        "id": "6ebe3cd2.4902c4",
        "type": "ui_text",
        "z": "cc79254f.7430d8",
        "group": "9f772b70.e760a8",
        "order": 6,
        "width": 3,
        "height": 1,
        "name": "Element output",
        "label": " ",
        "format": "{{payload | number:2}} kw",
        "layout": "row-left",
        "x": 360,
        "y": 520,
        "wires": []
    },
    {
        "id": "93411b64.c6bbc8",
        "type": "ui_text",
        "z": "cc79254f.7430d8",
        "group": "6f2d723f.543a7c",
        "order": 3,
        "width": "2",
        "height": "1",
        "name": "BK Element duty",
        "label": "Output",
        "format": "{{payload | number:0}}﹪",
        "layout": "col-center",
        "x": 370,
        "y": 560,
        "wires": []
    },
    {
        "id": "548fff53.8cbc7",
        "type": "link in",
        "z": "ce55a89f.3849c8",
        "name": "MLT GPIO logger",
        "links": [
            "cb64fb4.6088108",
            "c85e9945.a327c8"
        ],
        "x": 173,
        "y": 941,
        "wires": [
            [
                "6f949151.44989"
            ]
        ]
    },
    {
        "id": "6f949151.44989",
        "type": "switch",
        "z": "ce55a89f.3849c8",
        "name": "Output logging on?",
        "property": "output_log",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 308,
        "y": 941,
        "wires": [
            [
                "6d37c867.a64d18"
            ]
        ]
    },
    {
        "id": "312ab415.32644c",
        "type": "function",
        "z": "ce55a89f.3849c8",
        "name": "Format output for influxdb",
        "func": "msg.payload = [\n    {\n        measurement: \"output-BK\",\n        fields: {\n            duty: msg.payload,\n            brew: global.get(\"brew-label\")\n        },\n        timestamp: new Date()\n    }\n];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 938,
        "y": 941,
        "wires": [
            [
                "793ea392.db644c"
            ]
        ]
    },
    {
        "id": "6d37c867.a64d18",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 508,
        "y": 941,
        "wires": [
            [
                "c3cfb73f.e1faf8"
            ]
        ]
    },
    {
        "id": "c3cfb73f.e1faf8",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "rate",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 698,
        "y": 941,
        "wires": [
            [
                "312ab415.32644c"
            ]
        ]
    },
    {
        "id": "c9c2fcce.abe6b",
        "type": "link in",
        "z": "ce55a89f.3849c8",
        "name": "MLT PID logger",
        "links": [
            "e7dd3df7.2106a",
            "bf0721aa.53329"
        ],
        "x": 175,
        "y": 820,
        "wires": [
            [
                "c514919e.6eaa2"
            ]
        ]
    },
    {
        "id": "c514919e.6eaa2",
        "type": "switch",
        "z": "ce55a89f.3849c8",
        "name": "PID logging on?",
        "property": "pid_log",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 300,
        "y": 820,
        "wires": [
            [
                "70b31548.3d879c"
            ]
        ]
    },
    {
        "id": "1670f036.36c58",
        "type": "function",
        "z": "ce55a89f.3849c8",
        "name": "Format output for influxdb",
        "func": "msg.payload = [\n    {\n        measurement: \"PID-boil-main-loop\",\n        fields: {\n            target: msg.target,\n            output: msg.output,\n            error: msg.last_error,\n            integrator: msg.integrator,\n            derivative: msg.derivative,\n            //active: global.get(\"bk_pid\"),\n            brew: global.get(\"brew-label\")\n        },\n        timestamp: new Date()\n    }\n];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 940,
        "y": 820,
        "wires": [
            [
                "793ea392.db644c"
            ]
        ]
    },
    {
        "id": "70b31548.3d879c",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 510,
        "y": 820,
        "wires": [
            [
                "e3ab310a.ee22d"
            ]
        ]
    },
    {
        "id": "e3ab310a.ee22d",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "rate",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 700,
        "y": 820,
        "wires": [
            [
                "1670f036.36c58"
            ]
        ]
    },
    {
        "id": "6442cfef.51015",
        "type": "link in",
        "z": "ce55a89f.3849c8",
        "name": "HLT PID logger",
        "links": [
            "4ddb7150.13267",
            "76388d12.48d734"
        ],
        "x": 175,
        "y": 780,
        "wires": [
            [
                "41f1e38c.eecb1c"
            ]
        ]
    },
    {
        "id": "41f1e38c.eecb1c",
        "type": "switch",
        "z": "ce55a89f.3849c8",
        "name": "PID logging on?",
        "property": "pid_log",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 300,
        "y": 780,
        "wires": [
            [
                "a332f31f.95f1a"
            ]
        ]
    },
    {
        "id": "6d5f9492.6bf4dc",
        "type": "function",
        "z": "ce55a89f.3849c8",
        "name": "Format output for influxdb",
        "func": "msg.payload = [\n    {\n        measurement: \"PID-boil-main-loop\",\n        fields: {\n            target: msg.target,\n            output: msg.output,\n            error: msg.last_error,\n            integrator: msg.integrator,\n            derivative: msg.derivative,\n            //active: global.get(\"bk_pid\"),\n            brew: global.get(\"brew-label\")\n        },\n        timestamp: new Date()\n    }\n];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 940,
        "y": 780,
        "wires": [
            [
                "793ea392.db644c"
            ]
        ]
    },
    {
        "id": "a332f31f.95f1a",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 510,
        "y": 780,
        "wires": [
            [
                "985c42ac.ca283"
            ]
        ]
    },
    {
        "id": "985c42ac.ca283",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "rate",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 700,
        "y": 780,
        "wires": [
            [
                "6d5f9492.6bf4dc"
            ]
        ]
    },
    {
        "id": "7acd3c83.cc5404",
        "type": "link in",
        "z": "ce55a89f.3849c8",
        "name": "BK GPIO logger",
        "links": [
            "3352c817.f10c48",
            "66f7a048.da787"
        ],
        "x": 172,
        "y": 982,
        "wires": [
            [
                "facee430.c507a8"
            ]
        ]
    },
    {
        "id": "facee430.c507a8",
        "type": "switch",
        "z": "ce55a89f.3849c8",
        "name": "Output logging on?",
        "property": "output_log",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 307,
        "y": 982,
        "wires": [
            [
                "40bee0b8.05ed"
            ]
        ]
    },
    {
        "id": "e1d35cc3.bfb53",
        "type": "function",
        "z": "ce55a89f.3849c8",
        "name": "Format output for influxdb",
        "func": "msg.payload = [\n    {\n        measurement: \"output-BK\",\n        fields: {\n            duty: msg.payload,\n            brew: global.get(\"brew-label\")\n        },\n        timestamp: new Date()\n    }\n];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 937,
        "y": 982,
        "wires": [
            [
                "793ea392.db644c"
            ]
        ]
    },
    {
        "id": "40bee0b8.05ed",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 507,
        "y": 982,
        "wires": [
            [
                "5a3095f7.60c1ac"
            ]
        ]
    },
    {
        "id": "5a3095f7.60c1ac",
        "type": "delay",
        "z": "ce55a89f.3849c8",
        "name": "",
        "pauseType": "rate",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 697,
        "y": 982,
        "wires": [
            [
                "e1d35cc3.bfb53"
            ]
        ]
    },
    {
        "id": "2f74026c.c580ee",
        "type": "ui_text",
        "z": "2661457f.e66b3a",
        "group": "ef3bd2b4.11dc9",
        "order": 11,
        "width": 2,
        "height": 1,
        "name": "MLT temperature display",
        "label": "Kettle",
        "format": "{{msg.payload | number:1}}°C",
        "layout": "col-center",
        "x": 470,
        "y": 340,
        "wires": []
    },
    {
        "id": "feb4e317.e1e76",
        "type": "smooth",
        "z": "2661457f.e66b3a",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "5",
        "round": "2",
        "mult": "single",
        "reduce": false,
        "x": 380,
        "y": 300,
        "wires": [
            [
                "2f74026c.c580ee"
            ]
        ]
    },
    {
        "id": "62be8967.9942f8",
        "type": "sensor-ds18b20",
        "z": "2661457f.e66b3a",
        "name": "temp-MLT",
        "sensorid": "28-00000868284d",
        "timer": "2",
        "repeat": false,
        "x": 350,
        "y": 260,
        "wires": [
            [
                "feb4e317.e1e76",
                "db06208e.3d03a",
                "684ab5a4.7c368c"
            ]
        ]
    },
    {
        "id": "db06208e.3d03a",
        "type": "link out",
        "z": "2661457f.e66b3a",
        "name": "BK raw temperature",
        "links": [
            "d1b43cae.918ed",
            "7ff5440e.05101c"
        ],
        "x": 535,
        "y": 260,
        "wires": []
    },
    {
        "id": "684ab5a4.7c368c",
        "type": "ui_text",
        "z": "2661457f.e66b3a",
        "group": "9ce4e30a.c71b1",
        "order": 1,
        "width": 2,
        "height": 1,
        "name": "MLT temperature display",
        "label": "Kettle",
        "format": "{{msg.payload | number:1}}°C",
        "layout": "col-center",
        "x": 630,
        "y": 300,
        "wires": []
    },
    {
        "id": "b13a7a05.3c32a8",
        "type": "link in",
        "z": "6de3a69b.f14158",
        "name": "MLT bolt",
        "links": [
            "2b0ba0e2.409c5",
            "a271b65b.e0ce18"
        ],
        "x": 215,
        "y": 820,
        "wires": [
            [
                "1bf99666.6de31a"
            ]
        ]
    },
    {
        "id": "98071683.576448",
        "type": "link in",
        "z": "6de3a69b.f14158",
        "name": "BK bolt",
        "links": [
            "bf3b6903.c635c8",
            "f8ffebaa.709208"
        ],
        "x": 215,
        "y": 920,
        "wires": [
            [
                "40b62f87.5127"
            ]
        ]
    },
    {
        "id": "1bf99666.6de31a",
        "type": "change",
        "z": "6de3a69b.f14158",
        "name": "Bolt updates",
        "rules": [
            {
                "t": "set",
                "p": "mlt_lock",
                "pt": "msg",
                "to": "mlt_lock",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "mlt_on",
                "pt": "msg",
                "to": "mlt_on",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 820,
        "wires": [
            [
                "77028459.231d8c"
            ]
        ]
    },
    {
        "id": "40b62f87.5127",
        "type": "change",
        "z": "6de3a69b.f14158",
        "name": "Bolt updates",
        "rules": [
            {
                "t": "set",
                "p": "bk_lock",
                "pt": "msg",
                "to": "bk_lock",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "bk_on",
                "pt": "msg",
                "to": "bk_on",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 920,
        "wires": [
            [
                "6989863.51b8578"
            ]
        ]
    },
    {
        "id": "77028459.231d8c",
        "type": "ui_template",
        "z": "6de3a69b.f14158",
        "group": "ef3bd2b4.11dc9",
        "name": "MLT Bolt",
        "order": 1,
        "width": 3,
        "height": 2,
        "format": "<div>\n<ng-md-icon icon=\"{{(msg.hlt_lock || false) ? 'flash_off' : 'flash_on'}}\" size=100 style=\"{{(msg.mlt_on || false) ? 'fill: gold' : 'fill: grey'}}; margin-top:-34px\"></ng-md-icon>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 560,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "6989863.51b8578",
        "type": "ui_template",
        "z": "6de3a69b.f14158",
        "group": "9f772b70.e760a8",
        "name": "BK Bolt",
        "order": 1,
        "width": 3,
        "height": 2,
        "format": "<div>\n<ng-md-icon icon=\"{{(msg.hlt_lock || false) ? 'flash_off' : 'flash_on'}}\" size=100 style=\"{{(msg.bk_on || false) ? 'fill: gold' : 'fill: grey'}}; margin-top:-34px\"></ng-md-icon>\n</div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "templateScope": "local",
        "x": 560,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "79967210.9f174c",
        "type": "ui_button",
        "z": "ec35014e.440c6",
        "name": "",
        "group": "ef3bd2b4.11dc9",
        "order": 18,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "MLT Pump",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 230,
        "y": 200,
        "wires": [
            [
                "b872469b.20b138"
            ]
        ]
    },
    {
        "id": "8c88dfe7.7f8b3",
        "type": "link in",
        "z": "ec35014e.440c6",
        "name": "Pump button colour",
        "links": [
            "2abaa01b.3184e"
        ],
        "x": 115,
        "y": 200,
        "wires": [
            [
                "79967210.9f174c"
            ]
        ]
    },
    {
        "id": "b872469b.20b138",
        "type": "switch",
        "z": "ec35014e.440c6",
        "name": "Pump state",
        "property": "mlt_pump",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 450,
        "y": 200,
        "wires": [
            [
                "4a55083.3f398f8"
            ],
            [
                "fdf6db92.1aba98"
            ]
        ]
    },
    {
        "id": "fdf6db92.1aba98",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "Turn off",
        "rules": [
            {
                "t": "set",
                "p": "mlt_pump",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 220,
        "wires": [
            [
                "d9978441.af5068"
            ]
        ]
    },
    {
        "id": "4a55083.3f398f8",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "Turn on",
        "rules": [
            {
                "t": "set",
                "p": "mlt_pump",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 180,
        "wires": [
            [
                "d9978441.af5068"
            ]
        ]
    },
    {
        "id": "d9978441.af5068",
        "type": "link out",
        "z": "ec35014e.440c6",
        "name": "Pump update",
        "links": [
            "ce60447.54308b8",
            "9e39854.20ef778"
        ],
        "x": 775,
        "y": 200,
        "wires": []
    },
    {
        "id": "767e8d57.21efe4",
        "type": "ui_button",
        "z": "ec35014e.440c6",
        "name": "",
        "group": "9f772b70.e760a8",
        "order": 18,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "BK Pump",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{colour}}",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "x": 220,
        "y": 280,
        "wires": [
            [
                "607bfb6c.f3d644"
            ]
        ]
    },
    {
        "id": "a02f341f.eca688",
        "type": "link in",
        "z": "ec35014e.440c6",
        "name": "Pump button colour",
        "links": [
            "97d7f87e.7ebe48"
        ],
        "x": 115,
        "y": 280,
        "wires": [
            [
                "767e8d57.21efe4"
            ]
        ]
    },
    {
        "id": "607bfb6c.f3d644",
        "type": "switch",
        "z": "ec35014e.440c6",
        "name": "Pump state",
        "property": "bk_pump",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 450,
        "y": 280,
        "wires": [
            [
                "80e09dce.7b4ba"
            ],
            [
                "665438d.5d744c8"
            ]
        ]
    },
    {
        "id": "665438d.5d744c8",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "Turn off",
        "rules": [
            {
                "t": "set",
                "p": "bk_pump",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 300,
        "wires": [
            [
                "f3e61f7f.2ad2f"
            ]
        ]
    },
    {
        "id": "80e09dce.7b4ba",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "Turn on",
        "rules": [
            {
                "t": "set",
                "p": "bk_pump",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 260,
        "wires": [
            [
                "f3e61f7f.2ad2f"
            ]
        ]
    },
    {
        "id": "f3e61f7f.2ad2f",
        "type": "link out",
        "z": "ec35014e.440c6",
        "name": "Pump update",
        "links": [
            "36f2ebe2.651154",
            "df8bccb3.0fd56"
        ],
        "x": 775,
        "y": 280,
        "wires": []
    },
    {
        "id": "8f8f5578.4c0168",
        "type": "rpi-gpio out",
        "z": "ec35014e.440c6",
        "name": "Pump GPIO",
        "pin": "31",
        "set": true,
        "level": "0",
        "freq": "1",
        "out": "out",
        "x": 650,
        "y": 800,
        "wires": []
    },
    {
        "id": "a059cdb8.c1197",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "Pump update",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "mlt_pump",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 800,
        "wires": [
            [
                "8f8f5578.4c0168"
            ]
        ]
    },
    {
        "id": "ce60447.54308b8",
        "type": "link in",
        "z": "ec35014e.440c6",
        "name": "Pump update",
        "links": [
            "d9978441.af5068"
        ],
        "x": 315,
        "y": 800,
        "wires": [
            [
                "a059cdb8.c1197"
            ]
        ]
    },
    {
        "id": "11dfc57b.aed5eb",
        "type": "rpi-gpio out",
        "z": "ec35014e.440c6",
        "name": "Pump GPIO",
        "pin": "29",
        "set": true,
        "level": "0",
        "freq": "1",
        "out": "out",
        "x": 650,
        "y": 860,
        "wires": []
    },
    {
        "id": "d7e34f95.dd1d1",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "Pump update",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "bk_pump",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 860,
        "wires": [
            [
                "11dfc57b.aed5eb"
            ]
        ]
    },
    {
        "id": "36f2ebe2.651154",
        "type": "link in",
        "z": "ec35014e.440c6",
        "name": "Pump update",
        "links": [
            "f3e61f7f.2ad2f"
        ],
        "x": 315,
        "y": 860,
        "wires": [
            [
                "d7e34f95.dd1d1"
            ]
        ]
    },
    {
        "id": "23fb7c7.5a86a84",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "pump - off colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 540,
        "wires": [
            [
                "2abaa01b.3184e"
            ]
        ]
    },
    {
        "id": "dcfc01d0.85932",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "pump - on colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "gold",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 500,
        "wires": [
            [
                "2abaa01b.3184e"
            ]
        ]
    },
    {
        "id": "2d58ede8.091052",
        "type": "switch",
        "z": "ec35014e.440c6",
        "name": "Pump state",
        "property": "mlt_pump",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 430,
        "y": 520,
        "wires": [
            [
                "dcfc01d0.85932"
            ],
            [
                "23fb7c7.5a86a84"
            ]
        ]
    },
    {
        "id": "acc41f7.c6ddee",
        "type": "delay",
        "z": "ec35014e.440c6",
        "d": true,
        "name": "delay",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 370,
        "y": 480,
        "wires": [
            [
                "2d58ede8.091052"
            ]
        ]
    },
    {
        "id": "2abaa01b.3184e",
        "type": "link out",
        "z": "ec35014e.440c6",
        "name": "Pump button colour",
        "links": [
            "8c88dfe7.7f8b3"
        ],
        "x": 775,
        "y": 520,
        "wires": []
    },
    {
        "id": "9e39854.20ef778",
        "type": "link in",
        "z": "ec35014e.440c6",
        "name": "Pump update",
        "links": [
            "d9978441.af5068"
        ],
        "x": 255,
        "y": 480,
        "wires": [
            [
                "acc41f7.c6ddee",
                "2d58ede8.091052"
            ]
        ]
    },
    {
        "id": "806ad546.e78e68",
        "type": "ui_ui_control",
        "z": "ec35014e.440c6",
        "name": "Dashboard connection",
        "x": 220,
        "y": 520,
        "wires": [
            [
                "2d58ede8.091052"
            ]
        ]
    },
    {
        "id": "88ac3a02.c1bba8",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "pump - off colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "grey",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 620,
        "wires": [
            [
                "97d7f87e.7ebe48"
            ]
        ]
    },
    {
        "id": "2d0ba24c.6d86ee",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "pump - on colour",
        "rules": [
            {
                "t": "set",
                "p": "colour",
                "pt": "msg",
                "to": "gold",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 580,
        "wires": [
            [
                "97d7f87e.7ebe48"
            ]
        ]
    },
    {
        "id": "b9f72038.e7de3",
        "type": "switch",
        "z": "ec35014e.440c6",
        "name": "Pump state",
        "property": "bk_pump",
        "propertyType": "global",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 430,
        "y": 600,
        "wires": [
            [
                "2d0ba24c.6d86ee"
            ],
            [
                "88ac3a02.c1bba8"
            ]
        ]
    },
    {
        "id": "112bc70c.9cf289",
        "type": "delay",
        "z": "ec35014e.440c6",
        "d": true,
        "name": "delay",
        "pauseType": "delay",
        "timeout": "0.2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 370,
        "y": 560,
        "wires": [
            [
                "b9f72038.e7de3"
            ]
        ]
    },
    {
        "id": "97d7f87e.7ebe48",
        "type": "link out",
        "z": "ec35014e.440c6",
        "name": "Pump button colour",
        "links": [
            "a02f341f.eca688"
        ],
        "x": 775,
        "y": 600,
        "wires": []
    },
    {
        "id": "df8bccb3.0fd56",
        "type": "link in",
        "z": "ec35014e.440c6",
        "name": "Pump update",
        "links": [
            "f3e61f7f.2ad2f"
        ],
        "x": 255,
        "y": 560,
        "wires": [
            [
                "112bc70c.9cf289",
                "b9f72038.e7de3"
            ]
        ]
    },
    {
        "id": "965da7bc.6d1128",
        "type": "ui_ui_control",
        "z": "ec35014e.440c6",
        "name": "Dashboard connection",
        "x": 220,
        "y": 600,
        "wires": [
            [
                "b9f72038.e7de3"
            ]
        ]
    },
    {
        "id": "236eccd6.4d9754",
        "type": "rpi-gpio out",
        "z": "cc79254f.7430d8",
        "name": "BK2 GPIO",
        "pin": "37",
        "set": false,
        "level": "0",
        "freq": "1",
        "out": "pwm",
        "x": 310,
        "y": 620,
        "wires": []
    },
    {
        "id": "bc46a213.2ee13",
        "type": "link in",
        "z": "cc79254f.7430d8",
        "name": "BK GPIO",
        "links": [
            "3352c817.f10c48",
            "66f7a048.da787"
        ],
        "x": 175,
        "y": 640,
        "wires": [
            [
                "236eccd6.4d9754",
                "ecd63ae8.0f60f8",
                "1a13c17a.0b5a2f"
            ]
        ]
    },
    {
        "id": "ecd63ae8.0f60f8",
        "type": "range",
        "z": "cc79254f.7430d8",
        "minin": "0",
        "maxin": "100",
        "minout": "0",
        "maxout": "5.5",
        "action": "scale",
        "round": false,
        "property": "payload",
        "name": "Duty to watts",
        "x": 310,
        "y": 660,
        "wires": [
            [
                "4a571e36.45064"
            ]
        ]
    },
    {
        "id": "4a571e36.45064",
        "type": "ui_text",
        "z": "cc79254f.7430d8",
        "group": "9f772b70.e760a8",
        "order": 9,
        "width": 3,
        "height": 1,
        "name": "Element output",
        "label": " ",
        "format": "{{payload | number:2}} kw",
        "layout": "row-left",
        "x": 360,
        "y": 700,
        "wires": []
    },
    {
        "id": "1a13c17a.0b5a2f",
        "type": "ui_text",
        "z": "cc79254f.7430d8",
        "group": "6f2d723f.543a7c",
        "order": 3,
        "width": "2",
        "height": "1",
        "name": "BK Element duty",
        "label": "Output",
        "format": "{{payload | number:0}}﹪",
        "layout": "col-center",
        "x": 370,
        "y": 740,
        "wires": []
    },
    {
        "id": "dc144d18.c5609",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "mlt_pump",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "5724bf22.ef7c2",
        "type": "change",
        "z": "ec35014e.440c6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "bk_pump",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "90b8f41a.8f28d8",
        "type": "ui_text",
        "z": "2661457f.e66b3a",
        "group": "9f772b70.e760a8",
        "order": 12,
        "width": 2,
        "height": 1,
        "name": "CC temperature display",
        "label": "Chiller",
        "format": "{{msg.payload | number:1}}°C",
        "layout": "col-center",
        "x": 470,
        "y": 660,
        "wires": []
    },
    {
        "id": "c7d11e04.d354d",
        "type": "smooth",
        "z": "2661457f.e66b3a",
        "name": "",
        "property": "payload",
        "action": "mean",
        "count": "5",
        "round": "2",
        "mult": "single",
        "x": 380,
        "y": 620,
        "wires": [
            [
                "90b8f41a.8f28d8"
            ]
        ]
    },
    {
        "id": "1fe66ae.2d4ff95",
        "type": "sensor-ds18b20",
        "z": "2661457f.e66b3a",
        "name": "temp-CC",
        "sensorid": "28-000008695855",
        "timer": "2",
        "repeat": false,
        "x": 340,
        "y": 580,
        "wires": [
            [
                "c7d11e04.d354d",
                "5d334d36.db79c4",
                "fe9a2744.afab28"
            ]
        ]
    },
    {
        "id": "5d334d36.db79c4",
        "type": "link out",
        "z": "2661457f.e66b3a",
        "name": "CC raw temperature",
        "links": [
            "3c82d582.229d9a",
            "7ff5440e.05101c"
        ],
        "x": 535,
        "y": 580,
        "wires": []
    },
    {
        "id": "fe9a2744.afab28",
        "type": "ui_text",
        "z": "2661457f.e66b3a",
        "group": "6f2d723f.543a7c",
        "order": 1,
        "width": 2,
        "height": 1,
        "name": "CC temperature display",
        "label": "Chiller",
        "format": "{{msg.payload | number:1}}°C",
        "layout": "col-center",
        "x": 630,
        "y": 620,
        "wires": []
    }
]
